{"version":3,"file":"vue3-photo-preview.umd.js","sources":["../src/symbols.ts","../src/PhotoProvider/useItems.ts","../src/PhotoProvider/useVisible.ts","../src/PhotoProvider/useIndex.ts","../src/PhotoView/Spinner.vue","../src/PhotoView/Spinner.vue?vue&type=template&id=bfba7e90&lang.js","../src/utils/getSuitableImageSize.ts","../src/PhotoView/useLoadImage.ts","../node_modules/lodash-es/isObject.js","../node_modules/lodash-es/_freeGlobal.js","../node_modules/lodash-es/_root.js","../node_modules/lodash-es/now.js","../node_modules/lodash-es/_trimmedEndIndex.js","../node_modules/lodash-es/_baseTrim.js","../node_modules/lodash-es/_Symbol.js","../node_modules/lodash-es/_getRawTag.js","../node_modules/lodash-es/_objectToString.js","../node_modules/lodash-es/_baseGetTag.js","../node_modules/lodash-es/isObjectLike.js","../node_modules/lodash-es/isSymbol.js","../node_modules/lodash-es/toNumber.js","../node_modules/lodash-es/debounce.js","../node_modules/lodash-es/throttle.js","../src/PhotoView/useWindowResize.ts","../src/types.ts","../src/utils/getAnimateOrigin.ts","../src/utils/isTouchDevice.ts","../src/constant.ts","../src/utils/withContinuousTap.ts","../src/utils/getPositionOnMoveOrScale.ts","../src/utils/getEdgeInfo.ts","../src/utils/getMultipleTouchPosition.ts","../src/PhotoView/useMoveImage.ts","../src/PhotoView/index.vue","../src/PhotoView/index.vue?vue&type=template&id=10b188d1&lang.js","../src/PhotoSlider/useBodyEffect.ts","../src/PhotoSlider/useInnerWidth.ts","../src/PhotoSlider/Close.vue","../src/PhotoSlider/Close.vue?vue&type=template&id=112c245a&lang.js","../src/PhotoSlider/ArrowLeft.vue","../src/PhotoSlider/ArrowLeft.vue?vue&type=template&id=6e2f760b&lang.js","../src/PhotoSlider/ArrowRight.vue","../src/PhotoSlider/ArrowRight.vue?vue&type=template&id=d5f73570&lang.js","../src/PhotoSlider/RotateLeft.vue","../src/PhotoSlider/RotateLeft.vue?vue&type=template&id=b2d23392&lang.js","../src/PhotoSlider/RotateRight.vue","../src/PhotoSlider/RotateRight.vue?vue&type=template&id=698afa9c&lang.js","../src/PhotoSlider/FlipHorizontal.vue","../src/PhotoSlider/FlipHorizontal.vue?vue&type=template&id=15ac38a6&lang.js","../src/PhotoSlider/FlipVertical.vue","../src/PhotoSlider/FlipVertical.vue?vue&type=template&id=17ff0d78&lang.js","../src/PhotoSlider/Download.vue","../src/PhotoSlider/Download.vue?vue&type=template&id=7428b2fd&lang.js","../src/PhotoSlider/useAnimationHandle.ts","../src/PhotoSlider/index.vue","../src/PhotoSlider/index.vue?vue&type=template&id=6c981bcd&lang.js","../src/PhotoProvider/index.vue","../src/PhotoProvider/index.vue?vue&type=template&id=4c12d6c6&lang.js","../node_modules/lodash-es/_arrayMap.js","../node_modules/lodash-es/isArray.js","../node_modules/lodash-es/_baseToString.js","../node_modules/lodash-es/toString.js","../node_modules/lodash-es/uniqueId.js","../src/PhotoConsumer/index.vue","../src/PhotoConsumer/index.vue?vue&type=template&id=1325df3c&lang.js","../src/index.ts"],"sourcesContent":["import { UpdateItemType, RemoveItemType, HandleShowType } from './types';\nimport { InjectionKey } from 'vue';\n\nexport const updateItemKey: InjectionKey<UpdateItemType> = Symbol();\n\nexport const removeItemKey: InjectionKey<RemoveItemType> = Symbol();\n\nexport const handleShowKey: InjectionKey<HandleShowType> = Symbol();\n","import { ref, Ref } from 'vue';\nimport { ItemType, UpdateItemType, RemoveItemType } from '../types';\n\ntype useItemsReturn = {\n  items: Ref<ItemType[]>;\n  updateItem: UpdateItemType;\n  removeItem: RemoveItemType;\n}\n\nexport default function useItems(index: Ref<number>): useItemsReturn {\n  const items = ref<ItemType[]>([]);\n\n  const getElementIndex = (children: HTMLCollection, child: HTMLElement | null | undefined) => {\n    return child ? Array.prototype.indexOf.call(children, child) : -1;\n  };\n\n  const sortItems = (items: ItemType[]) => {\n    const children = items[0].originRef?.parentNode?.children;\n    if (children && children.length) {\n      items.sort((cur, next) => getElementIndex(children, cur.originRef) - getElementIndex(children, next.originRef));\n    }\n  };\n\n  const updateItem = (item: ItemType) => {\n    const index = items.value.findIndex(({ key }) => item.key === key);\n    if (index > -1) {\n      items.value.splice(index, 1, item);\n    } else {\n      items.value.push(item);\n      sortItems(items.value);\n    }\n  };\n\n  const removeItem = (key: string) => {\n    const nextItems = items.value.filter((item) => item.key !== key);\n    const nextEndIndex = nextItems.length - 1;\n\n    items.value = nextItems;\n    index.value = Math.max(Math.min(index.value, nextEndIndex), 0);\n  };\n\n  return {\n    items,\n    updateItem,\n    removeItem,\n  };\n}\n","import { ref, Ref } from 'vue';\nimport { HandleShowType, ItemType } from '../types';\n\ntype useVisibleReturn = {\n  visible: Ref<boolean>;\n  handleHide: () => void;\n  handleShow: HandleShowType;\n}\n\nexport default function useVisible(\n  items: Ref<ItemType[]>,\n  index: Ref<number>,\n  onVisibleChange: () => void\n): useVisibleReturn {\n  const visible = ref(false);\n\n  const handleHide = () => {\n    visible.value = false;\n    onVisibleChange();\n  };\n\n  const handleShow = (key: string) => {\n    const itemIndex = items.value.findIndex(item => item.key === key);\n    if (itemIndex > -1) {\n      index.value = itemIndex;\n      visible.value = true;\n      onVisibleChange();\n    }\n  };\n\n  return {\n    visible,\n    handleHide,\n    handleShow,\n  };\n}\n","import { ref, Ref } from 'vue';\n\ntype useIndexReturn = {\n  index: Ref<number>;\n  updateIndex: (newIndex: number) => void;\n}\n\nexport default function useIndex(onIndexChange: () => void): useIndexReturn {\n  const index = ref(0);\n\n  const updateIndex = (newIndex: number) => {\n    index.value = newIndex;\n    onIndexChange();\n  };\n\n  return {\n    index,\n    updateIndex,\n  };\n}\n","<template>\n  <div class=\"PhotoView__Spinner\">\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      viewBox=\"0 0 32 32\"\n      width=\"36\"\n      height=\"36\"\n      fill=\"white\"\n    >\n      <path\n        opacity=\".25\"\n        d=\"M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4\"\n      />\n      <path\n        d=\"M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z\"\n      />\n    </svg>\n  </div>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n@keyframes PhotoView__rotate {\n  from {\n    transform: rotate(0deg);\n  }\n\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes PhotoView__delayShow {\n  0%,\n  50% {\n    opacity: 0;\n  }\n\n  100% {\n    opacity: 1;\n  }\n}\n\n.PhotoView__Spinner {\n  animation: PhotoView__delayShow 0.4s linear both;\n\n  svg {\n    display: block;\n    animation: PhotoView__rotate 0.6s linear infinite;\n  }\n}\n\n</style>\n","<template>\n  <div class=\"PhotoView__Spinner\">\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      viewBox=\"0 0 32 32\"\n      width=\"36\"\n      height=\"36\"\n      fill=\"white\"\n    >\n      <path\n        opacity=\".25\"\n        d=\"M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4\"\n      />\n      <path\n        d=\"M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z\"\n      />\n    </svg>\n  </div>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n@keyframes PhotoView__rotate {\n  from {\n    transform: rotate(0deg);\n  }\n\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes PhotoView__delayShow {\n  0%,\n  50% {\n    opacity: 0;\n  }\n\n  100% {\n    opacity: 1;\n  }\n}\n\n.PhotoView__Spinner {\n  animation: PhotoView__delayShow 0.4s linear both;\n\n  svg {\n    display: block;\n    animation: PhotoView__rotate 0.6s linear infinite;\n  }\n}\n\n</style>\n","export default function getSuitableImageSize(\n  naturalWidth: number,\n  naturalHeight: number,\n  rotate: number,\n): {\n  width: number;\n  height: number;\n} {\n  let { innerWidth, innerHeight } = window;\n  // 如果图片不是水平，则调换宽高\n  const isVertical = rotate % 180 !== 0;\n  if (isVertical) {\n    [innerWidth, innerHeight] = [innerHeight, innerWidth];\n  }\n\n  let width;\n  let height;\n\n  // 缩放到和窗口一样所需要的比例\n  const scaleWidth = innerWidth / naturalWidth;\n  const scaleHeight = innerHeight / naturalHeight;\n\n  if (naturalWidth < innerWidth && naturalHeight < innerHeight) {\n    // 如果图片原始宽度未超过容器尺寸，则使用原始尺寸\n    width = naturalWidth;\n    height = naturalHeight;\n  } else {\n    // 否则缩放图片使之恰好放入\n    if (scaleWidth < scaleHeight) {\n      width = innerWidth;\n      height = innerWidth * (naturalHeight / naturalWidth);\n    } else {\n      width = innerHeight * (naturalWidth / naturalHeight);\n      height = innerHeight;\n    }\n  }\n\n  return {\n    width,\n    height\n  };\n}\n","import { ref, Ref, watch } from 'vue';\nimport getSuitableImageSize from '../utils/getSuitableImageSize';\n\nexport default function useLoadImage(src: Ref<string>): {\n  width: Ref<number>;\n  height: Ref<number>;\n  loaded: Ref<boolean>;\n  naturalWidth: Ref<number>;\n  naturalHeight: Ref<number>;\n  setSuitableImageSize: (actualWidth: number, actualHeight: number, rotate: number) => void;\n} {\n  const naturalWidth = ref(0);\n  const naturalHeight = ref(0);\n  const width = ref(0);\n  const height = ref(0);\n  const loaded = ref(false);\n\n  function setSuitableImageSize(actualWidth: number, actualHeight: number, rotate: number) {\n    const imageSize = getSuitableImageSize(actualWidth, actualHeight, rotate);\n    width.value = imageSize.width;\n    height.value = imageSize.height;\n  }\n\n  const loadImage = (src: string) => {\n    loaded.value = false;\n\n    const img = new Image();\n\n    img.onload = () => {\n      naturalWidth.value = img.naturalWidth;\n      naturalHeight.value = img.naturalHeight;\n      setSuitableImageSize(naturalWidth.value, naturalHeight.value, 0);\n      loaded.value = true;\n    };\n\n    img.src = src;\n  };\n\n  loadImage(src.value);\n\n  watch(src, () => {\n    loadImage(src.value);\n  });\n\n  return {\n    width,\n    height,\n    loaded,\n    naturalWidth,\n    naturalHeight,\n    setSuitableImageSize\n  };\n}\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nexport default isObject;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nexport default freeGlobal;\n","import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nexport default root;\n","import root from './_root.js';\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nexport default now;\n","/** Used to match a single whitespace character. */\nvar reWhitespace = /\\s/;\n\n/**\n * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace\n * character of `string`.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {number} Returns the index of the last non-whitespace character.\n */\nfunction trimmedEndIndex(string) {\n  var index = string.length;\n\n  while (index-- && reWhitespace.test(string.charAt(index))) {}\n  return index;\n}\n\nexport default trimmedEndIndex;\n","import trimmedEndIndex from './_trimmedEndIndex.js';\n\n/** Used to match leading whitespace. */\nvar reTrimStart = /^\\s+/;\n\n/**\n * The base implementation of `_.trim`.\n *\n * @private\n * @param {string} string The string to trim.\n * @returns {string} Returns the trimmed string.\n */\nfunction baseTrim(string) {\n  return string\n    ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')\n    : string;\n}\n\nexport default baseTrim;\n","import root from './_root.js';\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nexport default Symbol;\n","import Symbol from './_Symbol.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nexport default getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nexport default objectToString;\n","import Symbol from './_Symbol.js';\nimport getRawTag from './_getRawTag.js';\nimport objectToString from './_objectToString.js';\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nexport default baseGetTag;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nexport default isObjectLike;\n","import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nexport default isSymbol;\n","import baseTrim from './_baseTrim.js';\nimport isObject from './isObject.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = baseTrim(value);\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nexport default toNumber;\n","import isObject from './isObject.js';\nimport now from './now.js';\nimport toNumber from './toNumber.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nexport default debounce;\n","import debounce from './debounce.js';\nimport isObject from './isObject.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n  return debounce(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n\nexport default throttle;\n","import { Ref, onBeforeUnmount } from 'vue';\nimport throttle from 'lodash-es/throttle';\n\nexport default function useWindowResize(\n  naturalWidth: Ref<number>, naturalHeight: Ref<number>, rotate: Ref<number>,\n  setSuitableImageSize: (actualWidth: number, actualHeight: number, rotate: number) => void,\n): void {\n\n  const handleResize = throttle(() => {\n    setSuitableImageSize(naturalWidth.value, naturalHeight.value, rotate.value);\n  }, 8);\n\n  window.addEventListener('resize', handleResize);\n\n  onBeforeUnmount(() => {\n    window.removeEventListener('resize', handleResize);\n  });\n}\n","export type ItemType = {\n  // 唯一标识\n  key: string;\n  // 图片地址\n  src: string;\n  // 控住图片显示的节点\n  originRef?: HTMLElement | null;\n  // 图片介绍\n  intro?: string | null;\n  // 图片下载名称\n  downloadName?: string | null;\n}\n\nexport type OriginRectType = {\n  left: number;\n  top: number;\n  width: number;\n  height: number;\n} | null;\n\nexport type UpdateItemType = (item: ItemType) => void;\n\nexport type RemoveItemType = (key: string) => void;\n\nexport type HandleShowType = (key: string) => void;\n\n// 动画类型\nexport enum ShowAnimateEnum {\n  None,\n  In,\n  Out,\n}\n\n// 触摸状态\nexport enum TouchTypeEnum {\n  Normal,\n  X, // x 轴只能水平切换图片\n  Y, // y 轴只能撤销图片\n  Scale, // 缩放模式\n}\n\n// 边缘状态\nexport enum EdgeTypeEnum {\n  Left,\n  Right,\n  Top,\n  Bottom,\n}\n","import { OriginRectType } from \"../types\";\n\nexport default function getAnimateOrigin(originRect: OriginRectType): string | null {\n  if (originRect) {\n    const { innerWidth, innerHeight } = window;\n    // 动画的元素宽高为 0，计算触发的点的中心到中点的距离即是 AnimateOrigin（粗略计算）\n    const xOrigin = originRect.left + originRect.width / 2 - innerWidth / 2;\n    const yOrigin = originRect.top + originRect.height / 2 - innerHeight / 2;\n    return `${xOrigin}px ${yOrigin}px`;\n  }\n  return null;\n}\n","/**\n * 当前设备是否支持触摸事件\n */\nconst isTouchDevice = typeof document !== 'undefined' && 'ontouchstart' in document.documentElement;\n\nexport default isTouchDevice;\n","/**\n * 图片间隔\n */\nexport const horizontalOffset = 20;\n\n/**\n * 最小初始响应距离\n */\nexport const minStartTouchOffset = 10;\n\n/**\n * 最小切换图片距离\n */\nexport const minSwitchImageOffset = 40;\n\n/**\n * 最大缩放度（若图片足够大，则会超出该值）\n */\nexport const maxScale = 6;\n","import debounce from 'lodash-es/debounce';\n\nexport type TapFuncType = (clientX: number, clientY: number, e: TouchEvent | MouseEvent) => void;\n\nexport default function withContinuousTap(\n  singleTap: TapFuncType,\n  doubleTap: TapFuncType\n): TapFuncType {\n  // 当前连续点击次数\n  let continuousCount = 0;\n\n  const withSingleTap = debounce((...args: [number, number, TouchEvent | MouseEvent]) => {\n    continuousCount = 0;\n    singleTap(...args);\n  }, 300);\n\n  return function invokeTap(...args) {\n    continuousCount += 1;\n    withSingleTap(...args);\n    if (continuousCount >= 2) {\n      withSingleTap.cancel();\n      continuousCount = 0;\n      doubleTap(...args);\n    }\n  };\n}\n","/**\n * 获取移动或缩放之后的中心点\n */\nexport default function getPositionOnMoveOrScale({\n  x,\n  y,\n  clientX,\n  clientY,\n  fromScale,\n  toScale\n}: {\n  x: number,\n  y: number,\n  clientX: number,\n  clientY: number,\n  fromScale: number,\n  toScale: number\n}): {\n  x: number,\n  y: number,\n  scale: number,\n} {\n  const { innerWidth, innerHeight } = window;\n  // 缩放前的图片的中心坐标\n  const imageCenterClientX = innerWidth / 2 + x;\n  const imageCenterClientY = innerHeight / 2 + y;\n  // 放大偏移量\n  const offsetScale = toScale / fromScale;\n  // 缩放后的偏移量(为保证点击的点相对于视图位置不变，需要将缩放多出来的尺寸通过 translate 平衡掉)\n  const originX = -(clientX - imageCenterClientX) * (offsetScale - 1);\n  const originY = -(clientY - imageCenterClientY) * (offsetScale - 1);\n\n  return {\n    x: originX + x,\n    y: originY + y,\n    scale: toScale,\n  };\n}\n","import { EdgeTypeEnum } from '../types';\n\n/**\n * 获取图片拖拽到边缘需要的值\n */\nexport function getEdgeInfo({\n  width,\n  height,\n  scale,\n  rotate,\n}: {\n  width: number,\n  height: number,\n  scale: number,\n  rotate: number\n}): {\n  edgeLeft: number,\n  edgeRight: number,\n  edgeTop: number,\n  edgeBottom: number,\n} {\n  // 如果图片不是水平，则调换宽高\n  const isVertical = rotate % 180 !== 0;\n  if (isVertical) {\n    [width, height] = [height, width];\n  }\n\n  const { innerWidth, innerHeight } = window;\n  const currentWidth = width * scale;\n  const currentHeight = height * scale;\n\n  let edgeLeft, edgeRight, edgeTop, edgeBottom;\n\n  if (currentWidth > innerWidth) {\n    edgeLeft = (currentWidth - innerWidth) / 2;\n    edgeRight = -(currentWidth - innerWidth) / 2;\n  } else {\n    edgeLeft = 0;\n    edgeRight = 0;\n  }\n\n  if (currentHeight > innerHeight) {\n    edgeTop = (currentHeight - innerHeight) / 2;\n    edgeBottom = -(currentHeight - innerHeight) / 2;\n  } else {\n    edgeTop = 0;\n    edgeBottom = 0;\n  }\n\n  return {\n    edgeLeft,\n    edgeRight,\n    edgeTop,\n    edgeBottom,\n  };\n}\n\n/**\n * 获取边缘类型\n */\nexport function getEdgeTypes({\n  width,\n  height,\n  scale,\n  rotate,\n  x,\n  y,\n}: {\n  width: number,\n  height: number,\n  scale: number,\n  rotate: number,\n  x: number,\n  y: number,\n}): EdgeTypeEnum[] {\n  const position = getEdgeInfo({ width, height, scale, rotate });\n  const edgeTypes: EdgeTypeEnum[] = [];\n\n  if (x === position.edgeLeft) {\n    edgeTypes.push(EdgeTypeEnum.Left);\n  }\n  if (x === position.edgeRight) {\n    edgeTypes.push(EdgeTypeEnum.Right);\n  }\n  if (y === position.edgeTop) {\n    edgeTypes.push(EdgeTypeEnum.Top);\n  }\n  if (y === position.edgeBottom) {\n    edgeTypes.push(EdgeTypeEnum.Bottom);\n  }\n\n  return edgeTypes;\n}\n\n/**\n * 获取标准值\n */\nexport function getStandardPosition({\n  width,\n  height,\n  scale,\n  rotate,\n  x,\n  y,\n}: {\n  width: number,\n  height: number,\n  scale: number,\n  rotate: number,\n  x: number,\n  y: number,\n}): {\n  x: number,\n  y: number,\n  scale: number,\n} {\n  const { edgeLeft, edgeRight, edgeTop, edgeBottom } = getEdgeInfo({ width, height, scale, rotate });\n\n  if (x > edgeLeft) {\n    x = edgeLeft;\n  }\n  if (x < edgeRight) {\n    x = edgeRight;\n  }\n  if (y > edgeTop) {\n    y = edgeTop;\n  }\n  if (y < edgeBottom) {\n    y = edgeBottom;\n  }\n\n  return { x, y, scale };\n}\n","/**\n * 从 Touch 事件中获取两个触控中心的位置\n * @param e TouchEvent\n */\nexport default function getMultipleTouchPosition(e: TouchEvent): {\n  clientX: number,\n  clientY: number,\n  touchLength: number\n} {\n  const { clientX, clientY } = e.touches[0];\n  if (e.touches.length >= 2) {\n    const { clientX: nextClientX, clientY: nextClientY } = e.touches[1];\n    return {\n      clientX: (clientX + nextClientX) / 2,\n      clientY: (clientY + nextClientY) / 2,\n      touchLength: Math.sqrt(Math.pow(nextClientX - clientX, 2) + Math.pow(nextClientY - clientY, 2)),\n    };\n  }\n  return { clientX, clientY, touchLength: 0 };\n}\n","import { Ref, ref } from 'vue';\nimport isTouchDevice from '../utils/isTouchDevice';\nimport throttle from 'lodash-es/throttle';\nimport { TouchTypeEnum, EdgeTypeEnum } from '../types';\nimport { minStartTouchOffset, maxScale } from '../constant';\nimport withContinuousTap from '../utils/withContinuousTap';\nimport getPositionOnMoveOrScale from '../utils/getPositionOnMoveOrScale';\nimport { getStandardPosition, getEdgeTypes } from '../utils/getEdgeInfo';\nimport getMultipleTouchPosition from '../utils/getMultipleTouchPosition';\n\ntype useMoveImageReturn = {\n  x: Ref<number>;\n  y: Ref<number>;\n  scale: Ref<number>;\n  rotate: Ref<number>;\n  touched: Ref<boolean>;\n  handleMouseDown: (e: MouseEvent) => void;\n  handleTouchStart: (e: TouchEvent) => void;\n  handleWheel: (e: WheelEvent) => void;\n  handleRotateLeft: () => void;\n  handleRotateRight: () => void;\n}\n\nexport default function useMoveImage(\n  width: Ref<number>,\n  height: Ref<number>,\n  naturalWidth: Ref<number>,\n  naturalHeight: Ref<number>,\n  setSuitableImageSize: (actualWidth: number, actualHeight: number, rotate: number) => void,\n  onTouchStart: (clientX: number, clientY: number) => void,\n  onTouchMove: (touchType: TouchTypeEnum, clientX: number, clientY: number, lastScale: number, edgeTypes: EdgeTypeEnum[]) => void,\n  onTouchEnd: (touchType: TouchTypeEnum, clientX: number, clientY: number, lastScale: number, edgeTypes: EdgeTypeEnum[]) => void,\n  onSingleTap: (clientX: number, clientY: number, e: MouseEvent | TouchEvent) => void,\n): useMoveImageReturn {\n  // 图片 x 偏移量\n  const x = ref(0);\n  // 图片 y 偏移量\n  const y = ref(0);\n  // 图片缩放程度\n  const scale = ref(1);\n  // 图片旋转角度\n  const rotate = ref(0);\n  // 图片是否处于触摸状态\n  const touched = ref(false);\n  // 触摸开始时 x 的坐标\n  const clientX = ref(0);\n  // 触摸开始时 y 的坐标\n  const clientY = ref(0);\n  // 初始触摸状态\n  const touchType = ref(TouchTypeEnum.Normal);\n  // 上一次图片的 x 偏移量\n  const lastX = ref(0);\n  // 上一次图片的 y 偏移量\n  const lastY = ref(0);\n  // 上一次 touch 的长度\n  const lastTouchLength = ref(0);\n  // 上一次的图片缩放程度\n  const lastScale = ref(1);\n  // 边缘状态(用于缩放图片判断)\n  let edgeTypes: EdgeTypeEnum[] = [];\n\n  const handleMouseDown = (e: MouseEvent) => {\n    if (isTouchDevice) return;\n\n    handleDown(e.clientX, e.clientY, 0);\n\n    window.addEventListener('mousemove', handleMouseMove);\n    window.addEventListener('mouseup', handleMouseUp);\n  };\n\n  const handleTouchStart = (e: TouchEvent) => {\n    if (!isTouchDevice) return;\n\n    const touch = getMultipleTouchPosition(e);\n    handleDown(touch.clientX, touch.clientY, touch.touchLength);\n\n    window.addEventListener('touchmove', handleTouchMove);\n    window.addEventListener('touchend', handleTouchEnd);\n  };\n\n  const handleDown = (newClientX: number, newClientY: number, touchLength: number) => {\n    touched.value = true;\n    clientX.value = newClientX;\n    clientY.value = newClientY;\n    lastTouchLength.value = touchLength;\n    lastScale.value = scale.value;\n    edgeTypes = getEdgeTypes({\n      width: width.value,\n      height: height.value,\n      scale: scale.value,\n      rotate: rotate.value,\n      x: lastX.value,\n      y: lastY.value\n    });\n\n    onTouchStart(newClientX, newClientY);\n  };\n\n  const handleMouseMove = (e: MouseEvent) => {\n    if (isTouchDevice || !touched.value) return;\n\n    handleMove(e.clientX, e.clientY, 0);\n  };\n\n  const handleTouchMove = (e: TouchEvent) => {\n    if (!isTouchDevice || !touched.value) return;\n\n    const touch = getMultipleTouchPosition(e);\n    handleMove(touch.clientX, touch.clientY, touch.touchLength);\n  };\n\n  const handleMove = throttle((newClientX: number, newClientY: number, touchLength: number) => {\n    // 初始化触摸状态\n    if (touchType.value === TouchTypeEnum.Normal) {\n      if (scale.value !== 1 || touchLength) {\n        touchType.value = TouchTypeEnum.Scale;\n      } else {\n        const isMoveX = Math.abs(newClientX - clientX.value) > minStartTouchOffset;\n        const isMoveY = Math.abs(newClientY - clientY.value) > minStartTouchOffset;\n\n        if (!isMoveX && !isMoveY) return;\n\n        // 水平方向优先\n        touchType.value = isMoveX ? TouchTypeEnum.X : TouchTypeEnum.Y;\n      }\n    }\n\n    onTouchMove(touchType.value, newClientX, newClientY, lastScale.value, edgeTypes);\n\n    const newX = newClientX - clientX.value;\n    const newY = newClientY - clientY.value;\n    if (touchType.value === TouchTypeEnum.Y) {\n      x.value = newX + lastX.value;\n      y.value = newY + lastY.value;\n    }\n    if (touchType.value === TouchTypeEnum.Scale) {\n      if (touchLength) {\n        const endScale = scale.value + ((touchLength - lastTouchLength.value) / 100 / 2) * scale.value;\n        const toScale = Math.max(Math.min(endScale, Math.max(maxScale, naturalWidth.value / width.value)), 1);\n        handleToScale(toScale, newClientX, newClientY);\n        lastTouchLength.value = touchLength;\n      } else {\n        // 处于左边缘情况，右划交给父级处理，处于右边缘情况，左划交给父级处理\n        if (\n          !(newX > 0 && edgeTypes.includes(EdgeTypeEnum.Left)) &&\n          !(newX < 0 && edgeTypes.includes(EdgeTypeEnum.Right))\n        ) {\n          x.value = newX + lastX.value;\n        }\n        y.value = newY + lastY.value;\n      }\n    }\n  }, 8, { trailing: false });\n\n  const handleMouseUp = (e: MouseEvent) => {\n    if (isTouchDevice) return;\n\n    handleUp(e.clientX, e.clientY, e);\n\n    window.removeEventListener('mousemove', handleMouseMove);\n    window.removeEventListener('mouseup', handleMouseUp);\n  };\n\n  const handleTouchEnd = (e: TouchEvent) => {\n    if (!isTouchDevice) return;\n\n    const touch = e.changedTouches[0];\n    handleUp(touch.clientX, touch.clientY, e);\n\n    window.removeEventListener('touchmove', handleTouchMove);\n    window.removeEventListener('touchend', handleTouchEnd);\n  };\n\n  const onDoubleTap = (newClientX: number, newClientY: number) => {\n    if (touchType.value !== TouchTypeEnum.Normal) return;\n\n    if (scale.value === 1) {\n      const toScale = Math.max(2, naturalWidth.value / width.value);\n      const position = getPositionOnMoveOrScale({\n        x: x.value,\n        y: y.value,\n        clientX: newClientX,\n        clientY: newClientY,\n        fromScale: scale.value,\n        toScale,\n      });\n\n      x.value = position.x;\n      y.value = position.y;\n      scale.value = position.scale;\n    } else {\n      x.value = 0;\n      y.value = 0;\n      scale.value = 1;\n    }\n  };\n\n  const onTap = withContinuousTap(onSingleTap, onDoubleTap);\n\n  const handleUp = (newClientX: number, newClientY: number, e: TouchEvent | MouseEvent) => {\n    if (clientX.value === newClientX && clientY.value === newClientY) {\n      onTap(newClientX, newClientY, e);\n    }\n\n    onTouchEnd(touchType.value, newClientX, newClientY, lastScale.value, edgeTypes);\n\n    if (touchType.value === TouchTypeEnum.Y) {\n      x.value = 0;\n      y.value = 0;\n    }\n\n    if (touchType.value === TouchTypeEnum.Scale) {\n      setStandardPosition({\n        width: width.value,\n        height: height.value,\n        scale: scale.value,\n        rotate: rotate.value,\n        x: x.value,\n        y: y.value\n      });\n    }\n\n    touched.value = false;\n    touchType.value = TouchTypeEnum.Normal;\n    clientX.value = 0;\n    clientY.value = 0;\n    lastX.value = x.value;\n    lastY.value = y.value;\n  };\n\n  const handleWheel = (e: WheelEvent) => {\n    const endScale = scale.value - e.deltaY / 100 / 2;\n    const toScale = Math.max(Math.min(endScale, Math.max(maxScale, naturalWidth.value / width.value)), 1);\n    handleToScale(toScale, e.clientX, e.clientY);\n  };\n\n  const handleToScale = (newScale: number, newClientX: number, newClientY: number) => {\n    const position = getPositionOnMoveOrScale({\n      x: x.value,\n      y: y.value,\n      clientX: newClientX,\n      clientY: newClientY,\n      fromScale: scale.value,\n      toScale: newScale,\n    });\n\n    setStandardPosition({\n      width: width.value,\n      height: height.value,\n      scale: position.scale,\n      rotate: rotate.value,\n      x: position.x,\n      y: position.y\n    });\n  };\n\n  const setStandardPosition = (position: {\n    width: number; height: number; scale: number; rotate: number; x: number, y: number\n  }) => {\n    const standardPosition = getStandardPosition(position);\n    x.value = standardPosition.x;\n    y.value = standardPosition.y;\n    lastX.value = standardPosition.x;\n    lastY.value = standardPosition.y;\n    scale.value = standardPosition.scale;\n  };\n\n  const handleRotateLeft = () => {\n    rotate.value = rotate.value - 90;\n    setSuitableImageSize(naturalWidth.value, naturalHeight.value, rotate.value);\n    setStandardPosition({\n      width: width.value,\n      height: height.value,\n      scale: scale.value,\n      rotate: rotate.value,\n      x: x.value,\n      y: y.value\n    });\n  };\n\n  const handleRotateRight = () => {\n    rotate.value = rotate.value + 90;\n    setSuitableImageSize(naturalWidth.value, naturalHeight.value, rotate.value);\n    setStandardPosition({\n      width: width.value,\n      height: height.value,\n      scale: scale.value,\n      rotate: rotate.value,\n      x: x.value,\n      y: y.value\n    });\n  };\n\n  return {\n    x,\n    y,\n    scale,\n    touched,\n    handleMouseDown,\n    handleTouchStart,\n    handleWheel,\n    rotate,\n    handleRotateLeft,\n    handleRotateRight\n  };\n}\n","<template>\n  <div\n    v-if=\"loaded\"\n    class=\"PhotoView__PhotoWrap\"\n    :style=\"{\n      width: `${width}px`,\n      height: `${height}px`\n    }\"\n  >\n    <div\n      class=\"PhotoView__PhotoBox\"\n      :class=\"{\n        'PhotoView__animateIn': showAnimateType === ShowAnimateEnum.In,\n        'PhotoView__animateOut': showAnimateType === ShowAnimateEnum.Out,\n      }\"\n      :style=\"{\n        transformOrigin: getAnimateOrigin(originRect),\n        width: showAnimateType === ShowAnimateEnum.In || showAnimateType === ShowAnimateEnum.Out ? '0' : '100%'\n      }\"\n    >\n      <img\n        class=\"PhotoView__Photo\"\n        :src=\"src\"\n        :style=\"{\n          width: `${width}px`,\n          height: `${height}px`,\n          transform: getTransform(),\n          transition: touched ? undefined : 'transform 0.5s cubic-bezier(0.25, 0.8, 0.25, 1)',\n        }\"\n        @mousedown.prevent=\"handleMouseDown\"\n        @touchstart.prevent=\"handleTouchStart\"\n        @wheel=\"handleWheel\"\n      >\n    </div>\n  </div>\n  <spinner v-else />\n</template>\n\n<script lang='ts'>\nimport { defineComponent, PropType, toRefs } from 'vue';\nimport Spinner from './Spinner.vue';\nimport useLoadImage from './useLoadImage';\nimport useWindowResize from './useWindowResize';\nimport { OriginRectType, ShowAnimateEnum, TouchTypeEnum, EdgeTypeEnum } from '../types';\nimport getAnimateOrigin from '../utils/getAnimateOrigin';\nimport useMoveImage from './useMoveImage';\n\nexport default defineComponent({\n  name: 'PhotoView',\n  components: {\n    Spinner\n  },\n  props: {\n    /**\n     * 图片地址\n     */\n    src: {\n      type: String,\n      required: true,\n    },\n    /**\n     * 触发打开模态框的位置信息\n     */\n    originRect: {\n      type: Object as PropType<OriginRectType>,\n      default: null,\n    },\n    /**\n     * 动画类型\n     */\n    showAnimateType: {\n      type: Number as PropType<ShowAnimateEnum>,\n      default: null,\n    }\n  },\n  emits: ['touchStart', 'touchMove', 'touchEnd', 'singleTap'],\n  setup(props, { emit }) {\n    const { src } = toRefs(props);\n    const { width, height, loaded, naturalWidth, naturalHeight, setSuitableImageSize } = useLoadImage(src);\n\n    const onTouchStart = (clientX: number, clientY: number) => {\n      emit('touchStart', clientX, clientY);\n    };\n    const onTouchMove = (touchType: TouchTypeEnum, clientX: number, clientY: number, lastScale: number, edgeTypes: EdgeTypeEnum[]) => {\n      emit('touchMove', touchType, clientX, clientY, lastScale, edgeTypes);\n    };\n    const onTouchEnd = (touchType: TouchTypeEnum, clientX: number, clientY: number, lastScale: number, edgeTypes: EdgeTypeEnum[]) => {\n      emit('touchEnd', touchType, clientX, clientY, lastScale, edgeTypes);\n    };\n    const onSingleTap = (clientX: number, clientY: number, e: MouseEvent | TouchEvent) => {\n      emit('singleTap', clientX, clientY, e);\n    };\n\n    const {\n      x, y, scale, rotate, touched,\n      handleMouseDown, handleTouchStart, handleWheel, handleRotateLeft, handleRotateRight\n    } = useMoveImage(\n      width, height, naturalWidth, naturalHeight,\n      setSuitableImageSize, onTouchStart, onTouchMove, onTouchEnd, onSingleTap,\n    );\n\n    useWindowResize(naturalWidth, naturalHeight, rotate, setSuitableImageSize);\n\n    return {\n      width,\n      height,\n      loaded,\n      x,\n      y,\n      scale,\n      touched,\n      handleMouseDown,\n      handleTouchStart,\n      handleWheel,\n      rotate,\n      handleRotateLeft,\n      handleRotateRight\n    };\n  },\n  data() {\n    return {\n      ShowAnimateEnum,\n      // 翻转\n      isFlipHorizontal: false,\n      isFlipVertical: false,\n    };\n  },\n  methods: {\n    getAnimateOrigin,\n    toggleFlipHorizontal() {\n      this.isFlipHorizontal = !this.isFlipHorizontal;\n    },\n    toggleFlipVertical() {\n      this.isFlipVertical = !this.isFlipVertical;\n    },\n    getTransform() {\n      const scaleX = `${this.isFlipHorizontal ? '-' : ''}${this.scale}`;\n      const scaleY = `${this.isFlipVertical ? '-' : ''}${this.scale}`;\n      const transform: Record<string, string> = {\n        matrix: `${scaleX}, 0, 0, ${scaleY}, ${this.x}, ${this.y}`,\n      };\n      if (this.rotate) {\n        transform.rotate = `${this.rotate}deg`;\n      }\n\n      let str = '';\n      Object.keys(transform).forEach(name => {\n        str += `${name}(${transform[name]})`;\n      });\n\n      return str;\n    }\n  }\n});\n</script>\n\n<style lang=\"scss\">\n@keyframes PhotoView__animateIn {\n  from {\n    opacity: 0.4;\n    transform: scale(0.2);\n  }\n  to {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n\n@keyframes PhotoView__animateOut {\n  from {\n    opacity: 1;\n    transform: scale(1);\n  }\n  to {\n    opacity: 0;\n    transform: scale(0.2);\n  }\n}\n\n.PhotoView__PhotoWrap {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  .PhotoView__PhotoBox {\n    width: 0;\n    height: 0;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    &.PhotoView__animateIn {\n      opacity: 0.4;\n      animation: PhotoView__animateIn 0.4s cubic-bezier(0.25, 0.8, 0.25, 1) both;\n    }\n\n    &.PhotoView__animateOut {\n      opacity: 1;\n      animation: PhotoView__animateOut 0.4s cubic-bezier(0.25, 0.8, 0.25, 1) both;\n    }\n\n    .PhotoView__Photo {\n      touch-action: none;\n      cursor: grab;\n      display: block;\n\n      &:active {\n        cursor: grabbing;\n      }\n    }\n  }\n}\n</style>\n","<template>\n  <div\n    v-if=\"loaded\"\n    class=\"PhotoView__PhotoWrap\"\n    :style=\"{\n      width: `${width}px`,\n      height: `${height}px`\n    }\"\n  >\n    <div\n      class=\"PhotoView__PhotoBox\"\n      :class=\"{\n        'PhotoView__animateIn': showAnimateType === ShowAnimateEnum.In,\n        'PhotoView__animateOut': showAnimateType === ShowAnimateEnum.Out,\n      }\"\n      :style=\"{\n        transformOrigin: getAnimateOrigin(originRect),\n        width: showAnimateType === ShowAnimateEnum.In || showAnimateType === ShowAnimateEnum.Out ? '0' : '100%'\n      }\"\n    >\n      <img\n        class=\"PhotoView__Photo\"\n        :src=\"src\"\n        :style=\"{\n          width: `${width}px`,\n          height: `${height}px`,\n          transform: getTransform(),\n          transition: touched ? undefined : 'transform 0.5s cubic-bezier(0.25, 0.8, 0.25, 1)',\n        }\"\n        @mousedown.prevent=\"handleMouseDown\"\n        @touchstart.prevent=\"handleTouchStart\"\n        @wheel=\"handleWheel\"\n      >\n    </div>\n  </div>\n  <spinner v-else />\n</template>\n\n<script lang='ts'>\nimport { defineComponent, PropType, toRefs } from 'vue';\nimport Spinner from './Spinner.vue';\nimport useLoadImage from './useLoadImage';\nimport useWindowResize from './useWindowResize';\nimport { OriginRectType, ShowAnimateEnum, TouchTypeEnum, EdgeTypeEnum } from '../types';\nimport getAnimateOrigin from '../utils/getAnimateOrigin';\nimport useMoveImage from './useMoveImage';\n\nexport default defineComponent({\n  name: 'PhotoView',\n  components: {\n    Spinner\n  },\n  props: {\n    /**\n     * 图片地址\n     */\n    src: {\n      type: String,\n      required: true,\n    },\n    /**\n     * 触发打开模态框的位置信息\n     */\n    originRect: {\n      type: Object as PropType<OriginRectType>,\n      default: null,\n    },\n    /**\n     * 动画类型\n     */\n    showAnimateType: {\n      type: Number as PropType<ShowAnimateEnum>,\n      default: null,\n    }\n  },\n  emits: ['touchStart', 'touchMove', 'touchEnd', 'singleTap'],\n  setup(props, { emit }) {\n    const { src } = toRefs(props);\n    const { width, height, loaded, naturalWidth, naturalHeight, setSuitableImageSize } = useLoadImage(src);\n\n    const onTouchStart = (clientX: number, clientY: number) => {\n      emit('touchStart', clientX, clientY);\n    };\n    const onTouchMove = (touchType: TouchTypeEnum, clientX: number, clientY: number, lastScale: number, edgeTypes: EdgeTypeEnum[]) => {\n      emit('touchMove', touchType, clientX, clientY, lastScale, edgeTypes);\n    };\n    const onTouchEnd = (touchType: TouchTypeEnum, clientX: number, clientY: number, lastScale: number, edgeTypes: EdgeTypeEnum[]) => {\n      emit('touchEnd', touchType, clientX, clientY, lastScale, edgeTypes);\n    };\n    const onSingleTap = (clientX: number, clientY: number, e: MouseEvent | TouchEvent) => {\n      emit('singleTap', clientX, clientY, e);\n    };\n\n    const {\n      x, y, scale, rotate, touched,\n      handleMouseDown, handleTouchStart, handleWheel, handleRotateLeft, handleRotateRight\n    } = useMoveImage(\n      width, height, naturalWidth, naturalHeight,\n      setSuitableImageSize, onTouchStart, onTouchMove, onTouchEnd, onSingleTap,\n    );\n\n    useWindowResize(naturalWidth, naturalHeight, rotate, setSuitableImageSize);\n\n    return {\n      width,\n      height,\n      loaded,\n      x,\n      y,\n      scale,\n      touched,\n      handleMouseDown,\n      handleTouchStart,\n      handleWheel,\n      rotate,\n      handleRotateLeft,\n      handleRotateRight\n    };\n  },\n  data() {\n    return {\n      ShowAnimateEnum,\n      // 翻转\n      isFlipHorizontal: false,\n      isFlipVertical: false,\n    };\n  },\n  methods: {\n    getAnimateOrigin,\n    toggleFlipHorizontal() {\n      this.isFlipHorizontal = !this.isFlipHorizontal;\n    },\n    toggleFlipVertical() {\n      this.isFlipVertical = !this.isFlipVertical;\n    },\n    getTransform() {\n      const scaleX = `${this.isFlipHorizontal ? '-' : ''}${this.scale}`;\n      const scaleY = `${this.isFlipVertical ? '-' : ''}${this.scale}`;\n      const transform: Record<string, string> = {\n        matrix: `${scaleX}, 0, 0, ${scaleY}, ${this.x}, ${this.y}`,\n      };\n      if (this.rotate) {\n        transform.rotate = `${this.rotate}deg`;\n      }\n\n      let str = '';\n      Object.keys(transform).forEach(name => {\n        str += `${name}(${transform[name]})`;\n      });\n\n      return str;\n    }\n  }\n});\n</script>\n\n<style lang=\"scss\">\n@keyframes PhotoView__animateIn {\n  from {\n    opacity: 0.4;\n    transform: scale(0.2);\n  }\n  to {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n\n@keyframes PhotoView__animateOut {\n  from {\n    opacity: 1;\n    transform: scale(1);\n  }\n  to {\n    opacity: 0;\n    transform: scale(0.2);\n  }\n}\n\n.PhotoView__PhotoWrap {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  .PhotoView__PhotoBox {\n    width: 0;\n    height: 0;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    &.PhotoView__animateIn {\n      opacity: 0.4;\n      animation: PhotoView__animateIn 0.4s cubic-bezier(0.25, 0.8, 0.25, 1) both;\n    }\n\n    &.PhotoView__animateOut {\n      opacity: 1;\n      animation: PhotoView__animateOut 0.4s cubic-bezier(0.25, 0.8, 0.25, 1) both;\n    }\n\n    .PhotoView__Photo {\n      touch-action: none;\n      cursor: grab;\n      display: block;\n\n      &:active {\n        cursor: grabbing;\n      }\n    }\n  }\n}\n</style>\n","import { Ref, watch } from 'vue';\n\nexport default function useBodyEffect(visible: Ref<boolean>): void {\n  const { style } = document.body;\n  const originalOverflow = style.overflow;\n\n  watch(visible, () => {\n    if (visible.value) {\n      style.overflow = 'hidden';\n    } else {\n      style.overflow = originalOverflow;\n    }\n  });\n}\n","import { ref, Ref, onBeforeUnmount } from 'vue';\nimport throttle from 'lodash-es/throttle';\n\nexport default function useInnerWidth(): { innerWidth: Ref<number> } {\n  const innerWidth = ref(window.innerWidth);\n\n  const handleResize = throttle(() => {\n    innerWidth.value = window.innerWidth;\n  }, 8);\n\n  window.addEventListener('resize', handleResize);\n\n  onBeforeUnmount(() => {\n    window.removeEventListener('resize', handleResize);\n  });\n\n  return {\n    innerWidth\n  };\n}\n","<template>\n  <svg\n    version=\"1.1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"44\"\n    height=\"44\"\n    viewBox=\"0 0 768 768\"\n  >\n    <path\n      fill=\"#FFF\"\n      d=\"M607.5 205.5l-178.5 178.5 178.5 178.5-45 45-178.5-178.5-178.5 178.5-45-45 178.5-178.5-178.5-178.5 45-45 178.5 178.5 178.5-178.5z\"\n    />\n  </svg>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n","<template>\n  <svg\n    version=\"1.1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"44\"\n    height=\"44\"\n    viewBox=\"0 0 768 768\"\n  >\n    <path\n      fill=\"#FFF\"\n      d=\"M607.5 205.5l-178.5 178.5 178.5 178.5-45 45-178.5-178.5-178.5 178.5-45-45 178.5-178.5-178.5-178.5 45-45 178.5 178.5 178.5-178.5z\"\n    />\n  </svg>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n","<template>\n  <svg\n    version=\"1.1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"44\"\n    height=\"44\"\n    viewBox=\"0 0 768 768\"\n  >\n    <path d=\"M640.5 352.5v63h-390l178.5 180-45 45-256.5-256.5 256.5-256.5 45 45-178.5 180h390z\" />\n  </svg>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n","<template>\n  <svg\n    version=\"1.1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"44\"\n    height=\"44\"\n    viewBox=\"0 0 768 768\"\n  >\n    <path d=\"M640.5 352.5v63h-390l178.5 180-45 45-256.5-256.5 256.5-256.5 45 45-178.5 180h390z\" />\n  </svg>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n","<template>\n  <svg\n    version=\"1.1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"44\"\n    height=\"44\"\n    viewBox=\"0 0 768 768\"\n  >\n    <path d=\"M384 127.5l256.5 256.5-256.5 256.5-45-45 178.5-180h-390v-63h390l-178.5-180z\" />\n  </svg>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n","<template>\n  <svg\n    version=\"1.1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"44\"\n    height=\"44\"\n    viewBox=\"0 0 768 768\"\n  >\n    <path d=\"M384 127.5l256.5 256.5-256.5 256.5-45-45 178.5-180h-390v-63h390l-178.5-180z\" />\n  </svg>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n","<template>\n  <svg\n    viewBox=\"0 0 1024 1024\"\n    version=\"1.1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"44\"\n    height=\"44\"\n  >\n    <path\n      fill=\"#FFF\"\n      d=\"M744.81 959.5c99.37-180.1 116.14-454.76-274.34-445.6v221.85L134.82 400.12 470.46 64.5v217.1c467.59-12.2 519.68 412.74 274.35 677.9z\"\n    />\n  </svg>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n","<template>\n  <svg\n    viewBox=\"0 0 1024 1024\"\n    version=\"1.1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"44\"\n    height=\"44\"\n  >\n    <path\n      fill=\"#FFF\"\n      d=\"M744.81 959.5c99.37-180.1 116.14-454.76-274.34-445.6v221.85L134.82 400.12 470.46 64.5v217.1c467.59-12.2 519.68 412.74 274.35 677.9z\"\n    />\n  </svg>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n","<template>\n  <svg\n    viewBox=\"0 0 1000 1000\"\n    version=\"1.1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"44\"\n    height=\"44\"\n  >\n    <path\n      fill=\"#FFF\"\n      d=\"M555.668 258.9754V47.24496791175579l327.3385 327.3241L555.668 701.8941V485.52881146582615c-380.8294-8.9369-364.4728 258.9334-267.5596 434.5814C48.8389 661.5105 99.6385 247.0815 555.668 258.9754z\"\n    />\n  </svg>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n","<template>\n  <svg\n    viewBox=\"0 0 1000 1000\"\n    version=\"1.1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"44\"\n    height=\"44\"\n  >\n    <path\n      fill=\"#FFF\"\n      d=\"M555.668 258.9754V47.24496791175579l327.3385 327.3241L555.668 701.8941V485.52881146582615c-380.8294-8.9369-364.4728 258.9334-267.5596 434.5814C48.8389 661.5105 99.6385 247.0815 555.668 258.9754z\"\n    />\n  </svg>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n","<template>\n  <svg\n    viewBox=\"0 0 1024 1024\"\n    version=\"1.1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"44\"\n    height=\"44\"\n  >\n    <path\n      fill=\"#FFF\"\n      d=\"M978.432 492.832l-153.696-116.896c-17.504-13.312-31.968-6.208-32.096 15.776L792.032 480H231.968l-0.608-88.288c-0.16-22.016-14.592-29.088-32.096-15.776l-153.696 116.896c-17.504 13.312-17.12 34.592 0.864 47.264l154.144 108.608c17.984 12.672 32.576 5.056 32.416-16.96L232.384 544h559.2l-0.576 87.712c-0.16 22.016 14.432 29.632 32.416 16.96l154.144-108.608c17.984-12.672 18.4-33.92 0.864-47.232z\"\n    />\n  </svg>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n","<template>\n  <svg\n    viewBox=\"0 0 1024 1024\"\n    version=\"1.1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"44\"\n    height=\"44\"\n  >\n    <path\n      fill=\"#FFF\"\n      d=\"M978.432 492.832l-153.696-116.896c-17.504-13.312-31.968-6.208-32.096 15.776L792.032 480H231.968l-0.608-88.288c-0.16-22.016-14.592-29.088-32.096-15.776l-153.696 116.896c-17.504 13.312-17.12 34.592 0.864 47.264l154.144 108.608c17.984 12.672 32.576 5.056 32.416-16.96L232.384 544h559.2l-0.576 87.712c-0.16 22.016 14.432 29.632 32.416 16.96l154.144-108.608c17.984-12.672 18.4-33.92 0.864-47.232z\"\n    />\n  </svg>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n","<template>\n  <svg\n    viewBox=\"0 0 1024 1024\"\n    version=\"1.1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"44\"\n    height=\"44\"\n  >\n    <path\n      fill=\"#FFF\"\n      d=\"M494.03 74.72l-109.59 144.09c-12.48 16.41-5.82 29.97 14.79000001 30.09L482 249.47 482 774.53l-82.77 0.54c-20.64 0.15-27.27 13.68-14.79 30.09l109.59 144.09c12.48 16.41 32.43 16.05 44.31000001-0.81l101.81999999-144.51c11.88-16.86 4.74-30.54-15.9-30.39L542.00000001 774.14l-1e-8-524.25 82.23 0.54c20.64 0.15 27.78-13.53 15.9-30.39l-101.82-144.51c-11.88-16.86-31.8-17.25-44.28-0.81z\"\n    />\n  </svg>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n","<template>\n  <svg\n    viewBox=\"0 0 1024 1024\"\n    version=\"1.1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"44\"\n    height=\"44\"\n  >\n    <path\n      fill=\"#FFF\"\n      d=\"M494.03 74.72l-109.59 144.09c-12.48 16.41-5.82 29.97 14.79000001 30.09L482 249.47 482 774.53l-82.77 0.54c-20.64 0.15-27.27 13.68-14.79 30.09l109.59 144.09c12.48 16.41 32.43 16.05 44.31000001-0.81l101.81999999-144.51c11.88-16.86 4.74-30.54-15.9-30.39L542.00000001 774.14l-1e-8-524.25 82.23 0.54c20.64 0.15 27.78-13.53 15.9-30.39l-101.82-144.51c-11.88-16.86-31.8-17.25-44.28-0.81z\"\n    />\n  </svg>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n","<template>\n  <svg\n    viewBox=\"0 0 1068 1024\"\n    version=\"1.1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    p-id=\"2740\"\n    width=\"44\"\n    height=\"44\"\n  >\n    <path\n      d=\"M252.622237 809.004596a252.614304 252.614304 0 0 1-31.486765-503.2587v-4.352863a301.406611 301.406611 0 0 1 594.880633-68.660847 288.877568 288.877568 0 0 1-36.146765 575.488683 31.529129 31.529129 0 0 1 0-63.047667 225.819311 225.819311 0 0 0 8.472726-451.479758l-26.244267-0.974363-3.812726-25.990085a238.358944 238.358944 0 0 0-474.176071 34.664037 243.040125 243.040125 0 0 0 1.874591 30.035812l4.501135 35.786673-37.163491-0.3495h-0.730773c-104.521657 0-189.577228 85.034389-189.577228 189.577228s85.034389 189.577228 189.577228 189.577228a31.529129 31.529129 0 0 1 0 63.047667z\"\n      fill=\"#FFF\"\n    />\n    <path\n      d=\"M500.417679 442.421546m10.590906 0l46.599989 0q10.590907 0 10.590907 10.590906l0 528.878103q0 10.590907-10.590907 10.590907l-46.599989 0q-10.590907 0-10.590906-10.590907l0-528.878103q0-10.590907 10.590906-10.590906Z\"\n      fill=\"#FFF\"\n    />\n    <path\n      d=\"M487.406543 980.472843m7.488902-7.488902l171.982631-171.982631q7.488902-7.488902 14.977804 0l32.951168 32.951168q7.488902 7.488902 0 14.977804l-171.982631 171.982631q-7.488902 7.488902-14.977804 0l-32.951168-32.951168q-7.488902-7.488902 0-14.977804Z\"\n      fill=\"#FFF\"\n    />\n    <path\n      d=\"M344.966294 837.223674m7.488902-7.488902l32.951168-32.951168q7.488902-7.488902 14.977804 0l176.198883 176.198883q7.488902 7.488902 0 14.977804l-32.951168 32.951168q-7.488902 7.488902-14.977804 0l-176.198883-176.198883q-7.488902-7.488902 0-14.977804Z\"\n      fill=\"#FFF\"\n    />\n  </svg>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n","<template>\n  <svg\n    viewBox=\"0 0 1068 1024\"\n    version=\"1.1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    p-id=\"2740\"\n    width=\"44\"\n    height=\"44\"\n  >\n    <path\n      d=\"M252.622237 809.004596a252.614304 252.614304 0 0 1-31.486765-503.2587v-4.352863a301.406611 301.406611 0 0 1 594.880633-68.660847 288.877568 288.877568 0 0 1-36.146765 575.488683 31.529129 31.529129 0 0 1 0-63.047667 225.819311 225.819311 0 0 0 8.472726-451.479758l-26.244267-0.974363-3.812726-25.990085a238.358944 238.358944 0 0 0-474.176071 34.664037 243.040125 243.040125 0 0 0 1.874591 30.035812l4.501135 35.786673-37.163491-0.3495h-0.730773c-104.521657 0-189.577228 85.034389-189.577228 189.577228s85.034389 189.577228 189.577228 189.577228a31.529129 31.529129 0 0 1 0 63.047667z\"\n      fill=\"#FFF\"\n    />\n    <path\n      d=\"M500.417679 442.421546m10.590906 0l46.599989 0q10.590907 0 10.590907 10.590906l0 528.878103q0 10.590907-10.590907 10.590907l-46.599989 0q-10.590907 0-10.590906-10.590907l0-528.878103q0-10.590907 10.590906-10.590906Z\"\n      fill=\"#FFF\"\n    />\n    <path\n      d=\"M487.406543 980.472843m7.488902-7.488902l171.982631-171.982631q7.488902-7.488902 14.977804 0l32.951168 32.951168q7.488902 7.488902 0 14.977804l-171.982631 171.982631q-7.488902 7.488902-14.977804 0l-32.951168-32.951168q-7.488902-7.488902 0-14.977804Z\"\n      fill=\"#FFF\"\n    />\n    <path\n      d=\"M344.966294 837.223674m7.488902-7.488902l32.951168-32.951168q7.488902-7.488902 14.977804 0l176.198883 176.198883q7.488902 7.488902 0 14.977804l-32.951168 32.951168q-7.488902 7.488902-14.977804 0l-176.198883-176.198883q-7.488902-7.488902 0-14.977804Z\"\n      fill=\"#FFF\"\n    />\n  </svg>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n","import { Ref, ref, watch } from 'vue';\nimport { ItemType, ShowAnimateEnum, OriginRectType } from '../types';\n\ntype useAnimationHandleReturn = {\n  photoVisible: Ref<boolean>;\n  showAnimateType: Ref<ShowAnimateEnum>;\n  originRect: Ref<OriginRectType>;\n  onShowAnimateEnd: () => void;\n}\n\nexport default function useAnimationHandle(visible: Ref<boolean>, currentItem: Ref<ItemType>): useAnimationHandleReturn {\n  const photoVisible = ref(visible.value);\n  const showAnimateType = ref<ShowAnimateEnum>(ShowAnimateEnum.None);\n  const originRect = ref<OriginRectType>(null);\n\n  watch(visible, () => {\n    const originRef = currentItem.value.originRef;\n    // 点击打开按钮和关闭时收集位置信息，用于过渡动画\n    if (originRef && originRef.nodeType === 1 && originRef.children.length > 0) {\n      const { top, left, width, height } = originRef.getBoundingClientRect();\n      originRect.value = {\n        left, top, width, height\n      };\n    } else {\n      originRect.value = null;\n    }\n\n    if (visible.value) {\n      // 设置动画类型\n      showAnimateType.value = ShowAnimateEnum.In;\n      // 显示图片\n      photoVisible.value = true;\n    } else {\n      // 设置动画类型\n      showAnimateType.value = ShowAnimateEnum.Out;\n    }\n  });\n\n  // 动画结束的回调\n  const onShowAnimateEnd = () => {\n    // 动画完成才关闭弹窗\n    if (showAnimateType.value === ShowAnimateEnum.Out) {\n      photoVisible.value = false;\n    }\n    showAnimateType.value = ShowAnimateEnum.None;\n  };\n\n  return {\n    photoVisible,\n    showAnimateType,\n    originRect,\n    onShowAnimateEnd\n  };\n}\n","<template>\n  <teleport to=\"body\">\n    <div\n      v-if=\"photoVisible\"\n      class=\"PhotoSlider__Wrapper\"\n      :class=\"{\n        'PhotoSlider__Clean': showAnimateType !== ShowAnimateEnum.None ,\n        'PhotoSlider__Hide': !overlayVisible,\n      }\"\n    >\n      <div\n        class=\"PhotoSlider__Backdrop\"\n        :class=\"{\n          'PhotoSlider__fadeIn': showAnimateType === ShowAnimateEnum.In,\n          'PhotoSlider__fadeOut': showAnimateType === ShowAnimateEnum.Out\n        }\"\n        :style=\"{\n          background: `rgba(0, 0, 0, ${backdropOpacity})`,\n        }\"\n        @animationend=\"onShowAnimateEnd(), resetBackdropOpacity()\"\n      />\n      <div class=\"PhotoSlider__BannerWrap\">\n        <div class=\"PhotoSlider__Counter\">\n          {{ index + 1 }} / {{ items.length }}\n        </div>\n        <div class=\"PhotoSlider__BannerRight\">\n          <download\n            class=\"PhotoSlider__BannerIcon\"\n            @click=\"handleDownload\"\n          />\n          <rotate-left\n            class=\"PhotoSlider__BannerIcon\"\n            @click=\"handleRotateLeft\"\n          />\n          <rotate-right\n            class=\"PhotoSlider__BannerIcon\"\n            @click=\"handleRotateRight\"\n          />\n          <flip-horizontal\n            class=\"PhotoSlider__BannerIcon\"\n            @click=\"toggleFlipHorizontal\"\n          />\n          <flip-vertical\n            class=\"PhotoSlider__BannerIcon\"\n            @click=\"toggleFlipVertical\"\n          />\n          <close\n            class=\"PhotoSlider__BannerIcon\"\n            @click=\"handleClickClose\"\n          />\n        </div>\n      </div>\n      <div\n        v-for=\"(item, currentIndex) in showItems\"\n        :key=\"item.key\"\n        class=\"PhotoSlider__PhotoBox\"\n        :style=\"{\n          left: getItemLeft(currentIndex),\n          transition: getItemTransition(),\n          transform: getItemTransform()\n        }\"\n        @transitionend=\"resetNeedTransition\"\n        @click=\"handleClickMask\"\n      >\n        <photo-view\n          :ref=\"(val) => setPhotoViewRef(item.key, val)\"\n          :origin-rect=\"originRect\"\n          :show-animate-type=\"showAnimateType\"\n          :src=\"item.src\"\n          @click.stop\n          @touchStart=\"handleTouchStart\"\n          @touchMove=\"handleTouchMove\"\n          @touchEnd=\"handleTouchEnd\"\n          @singleTap=\"handleSingleTap\"\n        />\n      </div>\n      <template v-if=\"!isTouchDevice\">\n        <div\n          v-if=\"loop || index > 0\"\n          class=\"PhotoSlider__ArrowLeft\"\n          @click=\"handlePrevious\"\n        >\n          <arrow-left />\n        </div>\n        <div\n          v-if=\"loop || index < items.length - 1\"\n          class=\"PhotoSlider__ArrowRight\"\n          @click=\"handleNext\"\n        >\n          <arrow-right />\n        </div>\n      </template>\n      <div\n        v-if=\"currentItem.intro\"\n        class=\"PhotoSlider__FooterWrap\"\n      >\n        {{ currentItem.intro }}\n      </div>\n    </div>\n  </teleport>\n</template>\n\n<script lang='ts'>\nimport { defineComponent, computed, toRefs, PropType } from 'vue';\nimport PhotoView from '../PhotoView/index.vue';\nimport { horizontalOffset, minSwitchImageOffset } from '../constant';\nimport useBodyEffect from './useBodyEffect';\nimport useInnerWidth from './useInnerWidth';\nimport Close from './Close.vue';\nimport ArrowLeft from './ArrowLeft.vue';\nimport ArrowRight from './ArrowRight.vue';\nimport RotateLeft from './RotateLeft.vue';\nimport RotateRight from './RotateRight.vue';\nimport FlipHorizontal from './FlipHorizontal.vue';\nimport FlipVertical from './FlipVertical.vue';\nimport Download from './Download.vue';\nimport useAnimationHandle from './useAnimationHandle';\nimport { ItemType, ShowAnimateEnum, TouchTypeEnum, EdgeTypeEnum } from '../types';\nimport isTouchDevice from '../utils/isTouchDevice';\n\nexport default defineComponent({\n  name: 'PhotoSlider',\n  components: {\n    PhotoView,\n    Close,\n    ArrowLeft,\n    ArrowRight,\n    RotateLeft,\n    RotateRight,\n    FlipHorizontal,\n    FlipVertical,\n    Download,\n  },\n  props: {\n    /**\n     * 图片列表\n     */\n    items: {\n      type: Array as PropType<ItemType[]>,\n      required: true,\n    },\n    /**\n     * 图片当前索引\n     */\n    index: {\n      type: Number,\n      required: true,\n    },\n    /**\n     * 是否显示模态框\n     */\n    visible: {\n      type: Boolean,\n      required: true,\n    },\n    /**\n     * 箭头切换是否需要过渡\n     */\n    shouldTransition: {\n      type: Boolean,\n      default: false,\n    },\n    /**\n     * 是否切换显隐覆盖物\n     */\n    toggleOverlay: {\n      type: Boolean,\n      default: true,\n    },\n    /**\n     * 默认背景透明度\n     */\n    defaultBackdropOpacity: {\n      type: Number,\n      default: 1,\n    },\n    /**\n     * 是否循环显示预览图\n     */\n    loop: {\n      type: Boolean,\n      default: false,\n    },\n    /**\n     * 下载图片方法，不传使用内置的下载方法\n     */\n    downloadMethod: {\n      type: Function as PropType<(item: ItemType) => void | null>,\n      default: null,\n    }\n  },\n  emits: ['clickPhoto', 'clickMask', 'changeIndex', 'closeModal'],\n  setup(props) {\n    const { items, index, visible } = toRefs(props);\n    const currentItem = computed<ItemType>(() => {\n      return items.value[index.value] || {};\n    });\n\n    useBodyEffect(visible);\n    const {\n      photoVisible, showAnimateType, originRect, onShowAnimateEnd\n    } = useAnimationHandle(visible, currentItem);\n    const { innerWidth } = useInnerWidth();\n\n    return {\n      innerWidth,\n      currentItem,\n      photoVisible,\n      showAnimateType,\n      originRect,\n      onShowAnimateEnd,\n    };\n  },\n  data() {\n    return {\n      // 常量\n      horizontalOffset,\n      ShowAnimateEnum,\n      isTouchDevice,\n      // 触摸相关\n      touched: false,\n      hasMove: false,\n      needTransition: false,\n      clientX: 0,\n      clientY: 0,\n      touchMoveX: 0,\n      backdropOpacity: this.defaultBackdropOpacity,\n      // 是否显示覆盖物\n      overlayVisible: true,\n      // 虚拟下标，用于循环预览\n      virtualIndex: 0,\n      // photo-view 子组件\n      photoViewRefs: {} as { [key: string]: InstanceType<typeof PhotoView> },\n    };\n  },\n  computed: {\n    // 当前显示的图片列表\n    showItems() {\n      const len = this.items.length;\n      if (this.loop) {\n        const connect = this.items.concat(this.items).concat(this.items);\n        return connect.slice(len + this.index - 1, len + this.index + 2);\n      }\n      return this.items.slice(Math.max(this.index - 1, 0), Math.min(this.index + 2, len));\n    }\n  },\n  created() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  },\n  beforeUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  },\n  beforeUpdate() {\n    this.photoViewRefs = {};\n  },\n  methods: {\n    defaultDownloadMethod(item: ItemType) {\n      const paths = item.src.split('/');\n      const name = paths[paths.length - 1];\n\n      const img = new Image();\n      img.setAttribute('crossOrigin', 'Anonymous');\n      img.onload = () => {\n        const canvas = document.createElement('canvas');\n        const context = canvas.getContext('2d');\n        canvas.width = img.width;\n        canvas.height = img.height;\n        context?.drawImage(img, 0, 0, img.width, img.height);\n        canvas.toBlob(blob => {\n          if (blob) {\n            const url = URL.createObjectURL(blob);\n            const a = document.createElement('a');\n            a.download = item.downloadName || name;\n            a.href = url;\n            a.dispatchEvent(new MouseEvent('click'));\n            // 释放 createObjectURL 创建的内存对象（否则以 blob:http 开头的 url 可以到浏览器访问，多次创建内存会不断增大）\n            URL.revokeObjectURL(url);\n          }\n        });\n      };\n      img.src = item.src + '?v=' + Date.now();\n    },\n    handleDownload() {\n      const item = this.items[this.index];\n      if (typeof this.downloadMethod === 'function') {\n        this.downloadMethod(item);\n      } else {\n        this.defaultDownloadMethod(item);\n      }\n    },\n    toggleFlipHorizontal() {\n      this.photoViewRefs[this.currentItem.key]?.toggleFlipHorizontal();\n    },\n    toggleFlipVertical() {\n      this.photoViewRefs[this.currentItem.key]?.toggleFlipVertical();\n    },\n    handleRotateLeft() {\n      this.photoViewRefs[this.currentItem.key]?.handleRotateLeft();\n    },\n    handleRotateRight() {\n      this.photoViewRefs[this.currentItem.key]?.handleRotateRight();\n    },\n    setPhotoViewRef(key: string, ref: InstanceType<typeof PhotoView>) {\n      this.photoViewRefs[key] = ref;\n    },\n    handleKeyDown(e: KeyboardEvent) {\n      if (this.visible) {\n        switch (e.code) {\n          case 'ArrowLeft':\n            this.handlePrevious();\n            break;\n          case 'ArrowRight':\n            this.handleNext();\n            break;\n          case 'Escape':\n            this.handleClickClose();\n            break;\n        }\n      }\n    },\n    handleSingleTap(_clientX: number, _clientY: number, e: MouseEvent | TouchEvent) {\n      if (this.toggleOverlay) {\n        this.overlayVisible = !this.overlayVisible;\n      }\n      this.$emit('clickPhoto', e);\n    },\n    handleTouchStart(clientX: number, clientY: number) {\n      this.touched = true;\n      this.needTransition = false;\n      this.clientX = clientX;\n      this.clientY = clientY;\n    },\n    handleTouchMove(touchType: TouchTypeEnum, clientX: number, clientY: number, lastScale: number, edgeTypes: EdgeTypeEnum[]) {\n      if (touchType === TouchTypeEnum.Scale && lastScale !== 1) {\n        this.handleTouchScaleMove(clientX, edgeTypes);\n      }\n      if (touchType === TouchTypeEnum.X) {\n        this.handleTouchHorizontalMove(clientX);\n      }\n      if (touchType === TouchTypeEnum.Y) {\n        this.handleTouchVerticalMove(clientX, clientY);\n      }\n    },\n    handleTouchScaleMove(clientX: number, edgeTypes: EdgeTypeEnum[]) {\n      let touchMoveX = clientX - this.clientX;\n      if (\n        (touchMoveX > 0 && edgeTypes.includes(EdgeTypeEnum.Left)) ||\n        (touchMoveX < 0 && edgeTypes.includes(EdgeTypeEnum.Right))\n      ) {\n        this.handleTouchHorizontalMove(clientX);\n      }\n    },\n    handleTouchHorizontalMove(clientX: number) {\n      let touchMoveX = clientX - this.clientX;\n\n      // 非循环模式下，第一张和最后一张超出时拖拽距离减半\n      if (\n        !this.loop &&\n        ((this.index === 0 && touchMoveX > 0) || (this.index === this.items.length - 1 && touchMoveX < 0))\n      ) {\n        touchMoveX = touchMoveX / 2;\n      }\n\n      this.hasMove = clientX !== this.clientX;\n      this.touchMoveX = touchMoveX;\n    },\n    handleTouchVerticalMove(clientX: number, clientY: number) {\n      let touchMoveY = Math.abs(clientY - this.clientY);\n      const opacity = Math.max(\n        Math.min(this.defaultBackdropOpacity, this.defaultBackdropOpacity - touchMoveY / 100 / 4),\n        0\n      );\n\n      this.hasMove = clientX !== this.clientX || clientY !== this.clientY;\n      this.backdropOpacity = opacity;\n    },\n    handleTouchEnd(touchType: TouchTypeEnum, clientX: number, clientY: number, lastScale: number, edgeTypes: EdgeTypeEnum[]) {\n      if (touchType === TouchTypeEnum.Scale && lastScale !== 1) {\n        this.handleTouchScaleEnd(clientX, edgeTypes);\n      }\n      if (touchType === TouchTypeEnum.X) {\n        this.handleTouchHorizontalEnd(clientX);\n      }\n      if (touchType === TouchTypeEnum.Y) {\n        this.handleTouchVerticalEnd(clientY);\n      }\n      // 只要移动过，则需要动画过渡\n      if (this.hasMove) {\n        this.needTransition = true;\n      }\n      this.touched = false;\n      this.hasMove = false;\n      this.clientX = 0;\n      this.clientY = 0;\n      this.touchMoveX = 0;\n    },\n    handleTouchScaleEnd(clientX: number, edgeTypes: EdgeTypeEnum[]) {\n      const offsetX = clientX - this.clientX;\n      // 下一张\n      if (offsetX < -minSwitchImageOffset && edgeTypes.includes(EdgeTypeEnum.Right)) {\n        this.handleNext();\n      }\n      // 上一张\n      if (offsetX > minSwitchImageOffset && edgeTypes.includes(EdgeTypeEnum.Left)) {\n        this.handlePrevious();\n      }\n    },\n    handleTouchHorizontalEnd(clientX: number) {\n      const offsetX = clientX - this.clientX;\n      // 下一张\n      if (offsetX < -minSwitchImageOffset) {\n        this.handleNext();\n      }\n      // 上一张\n      if (offsetX > minSwitchImageOffset) {\n        this.handlePrevious();\n      }\n    },\n    handleTouchVerticalEnd(clientY: number) {\n      const offsetY = clientY - this.clientY;\n\n      if (Math.abs(offsetY) > window.innerHeight * 0.14) {\n        this.$emit('closeModal');\n      } else {\n        this.resetBackdropOpacity();\n      }\n    },\n    resetBackdropOpacity() {\n      this.backdropOpacity = this.defaultBackdropOpacity;\n    },\n    resetNeedTransition() {\n      this.needTransition = false;\n    },\n    handlePrevious() {\n      const len = this.items.length;\n      if (!this.loop && this.index === 0) return;\n      this.$emit('changeIndex', (this.index + len - 1) % len);\n      this.virtualIndex -= 1;\n    },\n    handleNext() {\n      const len = this.items.length;\n      if (!this.loop && this.index === len - 1) return;\n      this.$emit('changeIndex', (this.index + 1) % len);\n      this.virtualIndex += 1;\n    },\n    handleClickMask(e: MouseEvent | TouchEvent) {\n      this.$emit('clickMask', e);\n    },\n    handleClickClose() {\n      this.$emit('closeModal');\n    },\n    // 当预览下一张时，currentIndex 会从 1 变成 0，相当于左移一个单位，所以此时只需要右移一个单位的来平衡 transform 的左移即可\n    getItemLeft(currentIndex: number) {\n      let index = this.virtualIndex + currentIndex;\n      // 非循环模式的第一张图片不需要左移，因为只有两张图片，左侧没有图片\n      if (this.loop || this.index !== 0) {\n        index -= 1;\n      }\n      return `${(this.innerWidth + this.horizontalOffset) * index}px`;\n    },\n    getItemTransition() {\n      const transition = 'transform 0.6s cubic-bezier(0.25, 0.8, 0.25, 1)';\n      if (this.needTransition) {\n        return transition;\n      }\n      if (this.hasMove) {\n        return undefined;\n      }\n      return this.shouldTransition ? transition : undefined;\n    },\n    getItemTransform() {\n      return `translate3d(${-(this.innerWidth + this.horizontalOffset) * this.virtualIndex + this.touchMoveX}px, 0px, 0px)`;\n    }\n  }\n});\n</script>\n\n<style lang=\"scss\">\n@keyframes PhotoView__fade {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n\n.PhotoSlider__Wrapper.PhotoSlider__Clean {\n  .PhotoSlider__BannerWrap,\n  .PhotoSlider__ArrowLeft,\n  .PhotoSlider__ArrowRight,\n  .PhotoSlider__FooterWrap {\n    opacity: 0;\n    @media (any-hover: hover){\n      &:hover {\n        opacity: 0;\n      }\n    }\n  }\n}\n\n.PhotoSlider__Wrapper.PhotoSlider__Hide {\n  .PhotoSlider__BannerWrap,\n  .PhotoSlider__ArrowLeft,\n  .PhotoSlider__ArrowRight,\n  .PhotoSlider__FooterWrap {\n    opacity: 0;\n  }\n}\n\n.PhotoSlider__Wrapper {\n  position: fixed;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  z-index: 2000;\n  user-select: none;\n\n  .PhotoSlider__Backdrop {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    z-index: -1;\n\n    &.PhotoSlider__fadeIn {\n      opacity: 0;\n      animation: PhotoView__fade 0.4s linear both;\n    }\n    &.PhotoSlider__fadeOut {\n      opacity: 1;\n      animation: PhotoView__fade 0.4s linear both reverse;\n    }\n  }\n\n  .PhotoSlider__BannerWrap {\n    position: absolute;\n    left: 0;\n    top: 0;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    width: 100%;\n    height: 44px;\n    color: white;\n    background-color: rgba(0, 0, 0, 0.5);\n    transition: opacity 0.2s ease-out;\n    z-index: 20;\n\n    @media (any-hover: hover){\n      &:hover {\n        opacity: 1;\n      }\n    }\n\n    .PhotoSlider__Counter {\n      padding: 0 10px;\n      font-size: 14px;\n      opacity: 0.75;\n    }\n\n    .PhotoSlider__BannerRight {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      height: 100%;\n\n      .PhotoSlider__BannerIcon {\n        vertical-align: top;\n        box-sizing: border-box;\n        padding: 10px;\n        opacity: 0.75;\n        cursor: pointer;\n        transition: all 0.2s linear;\n\n        @media (any-hover: hover){\n          &:hover {\n            opacity: 1;\n          }\n        }\n      }\n    }\n  }\n\n  .PhotoSlider__PhotoBox {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    z-index: 10;\n    overflow: hidden;\n  }\n\n  .PhotoSlider__ArrowLeft {\n    left: 0;\n  }\n\n  .PhotoSlider__ArrowRight {\n    right: 0;\n  }\n\n  .PhotoSlider__ArrowLeft,\n  .PhotoSlider__ArrowRight {\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    margin: auto 0 auto 0;\n    width: 70px;\n    height: 100px;\n    opacity: 0.7;\n    z-index: 20;\n    cursor: pointer;\n    transition: opacity 0.2s linear;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    @media (any-hover: hover){\n      &:hover {\n        opacity: 1;\n      }\n    }\n\n    svg {\n      box-sizing: content-box;\n      padding: 10px;\n      width: 24px;\n      height: 24px;\n      fill: white;\n      background: rgba(0, 0, 0, 0.3);\n    }\n  }\n\n  .PhotoSlider__FooterWrap {\n    position: absolute;\n    left: 0;\n    bottom: 0;\n    box-sizing: border-box;\n    width: 100%;\n    min-height: 44px;\n    padding: 10px;\n    line-height: 1.5;\n    font-size: 14px;\n    text-align: justify;\n    color: #ccc;\n    background-color: rgba(0, 0, 0, 0.5);\n    transition: opacity 0.2s ease-out;\n    z-index: 20;\n\n    @media (any-hover: hover){\n      &:hover {\n        opacity: 1;\n      }\n    }\n  }\n}\n</style>\n","<template>\n  <teleport to=\"body\">\n    <div\n      v-if=\"photoVisible\"\n      class=\"PhotoSlider__Wrapper\"\n      :class=\"{\n        'PhotoSlider__Clean': showAnimateType !== ShowAnimateEnum.None ,\n        'PhotoSlider__Hide': !overlayVisible,\n      }\"\n    >\n      <div\n        class=\"PhotoSlider__Backdrop\"\n        :class=\"{\n          'PhotoSlider__fadeIn': showAnimateType === ShowAnimateEnum.In,\n          'PhotoSlider__fadeOut': showAnimateType === ShowAnimateEnum.Out\n        }\"\n        :style=\"{\n          background: `rgba(0, 0, 0, ${backdropOpacity})`,\n        }\"\n        @animationend=\"onShowAnimateEnd(), resetBackdropOpacity()\"\n      />\n      <div class=\"PhotoSlider__BannerWrap\">\n        <div class=\"PhotoSlider__Counter\">\n          {{ index + 1 }} / {{ items.length }}\n        </div>\n        <div class=\"PhotoSlider__BannerRight\">\n          <download\n            class=\"PhotoSlider__BannerIcon\"\n            @click=\"handleDownload\"\n          />\n          <rotate-left\n            class=\"PhotoSlider__BannerIcon\"\n            @click=\"handleRotateLeft\"\n          />\n          <rotate-right\n            class=\"PhotoSlider__BannerIcon\"\n            @click=\"handleRotateRight\"\n          />\n          <flip-horizontal\n            class=\"PhotoSlider__BannerIcon\"\n            @click=\"toggleFlipHorizontal\"\n          />\n          <flip-vertical\n            class=\"PhotoSlider__BannerIcon\"\n            @click=\"toggleFlipVertical\"\n          />\n          <close\n            class=\"PhotoSlider__BannerIcon\"\n            @click=\"handleClickClose\"\n          />\n        </div>\n      </div>\n      <div\n        v-for=\"(item, currentIndex) in showItems\"\n        :key=\"item.key\"\n        class=\"PhotoSlider__PhotoBox\"\n        :style=\"{\n          left: getItemLeft(currentIndex),\n          transition: getItemTransition(),\n          transform: getItemTransform()\n        }\"\n        @transitionend=\"resetNeedTransition\"\n        @click=\"handleClickMask\"\n      >\n        <photo-view\n          :ref=\"(val) => setPhotoViewRef(item.key, val)\"\n          :origin-rect=\"originRect\"\n          :show-animate-type=\"showAnimateType\"\n          :src=\"item.src\"\n          @click.stop\n          @touchStart=\"handleTouchStart\"\n          @touchMove=\"handleTouchMove\"\n          @touchEnd=\"handleTouchEnd\"\n          @singleTap=\"handleSingleTap\"\n        />\n      </div>\n      <template v-if=\"!isTouchDevice\">\n        <div\n          v-if=\"loop || index > 0\"\n          class=\"PhotoSlider__ArrowLeft\"\n          @click=\"handlePrevious\"\n        >\n          <arrow-left />\n        </div>\n        <div\n          v-if=\"loop || index < items.length - 1\"\n          class=\"PhotoSlider__ArrowRight\"\n          @click=\"handleNext\"\n        >\n          <arrow-right />\n        </div>\n      </template>\n      <div\n        v-if=\"currentItem.intro\"\n        class=\"PhotoSlider__FooterWrap\"\n      >\n        {{ currentItem.intro }}\n      </div>\n    </div>\n  </teleport>\n</template>\n\n<script lang='ts'>\nimport { defineComponent, computed, toRefs, PropType } from 'vue';\nimport PhotoView from '../PhotoView/index.vue';\nimport { horizontalOffset, minSwitchImageOffset } from '../constant';\nimport useBodyEffect from './useBodyEffect';\nimport useInnerWidth from './useInnerWidth';\nimport Close from './Close.vue';\nimport ArrowLeft from './ArrowLeft.vue';\nimport ArrowRight from './ArrowRight.vue';\nimport RotateLeft from './RotateLeft.vue';\nimport RotateRight from './RotateRight.vue';\nimport FlipHorizontal from './FlipHorizontal.vue';\nimport FlipVertical from './FlipVertical.vue';\nimport Download from './Download.vue';\nimport useAnimationHandle from './useAnimationHandle';\nimport { ItemType, ShowAnimateEnum, TouchTypeEnum, EdgeTypeEnum } from '../types';\nimport isTouchDevice from '../utils/isTouchDevice';\n\nexport default defineComponent({\n  name: 'PhotoSlider',\n  components: {\n    PhotoView,\n    Close,\n    ArrowLeft,\n    ArrowRight,\n    RotateLeft,\n    RotateRight,\n    FlipHorizontal,\n    FlipVertical,\n    Download,\n  },\n  props: {\n    /**\n     * 图片列表\n     */\n    items: {\n      type: Array as PropType<ItemType[]>,\n      required: true,\n    },\n    /**\n     * 图片当前索引\n     */\n    index: {\n      type: Number,\n      required: true,\n    },\n    /**\n     * 是否显示模态框\n     */\n    visible: {\n      type: Boolean,\n      required: true,\n    },\n    /**\n     * 箭头切换是否需要过渡\n     */\n    shouldTransition: {\n      type: Boolean,\n      default: false,\n    },\n    /**\n     * 是否切换显隐覆盖物\n     */\n    toggleOverlay: {\n      type: Boolean,\n      default: true,\n    },\n    /**\n     * 默认背景透明度\n     */\n    defaultBackdropOpacity: {\n      type: Number,\n      default: 1,\n    },\n    /**\n     * 是否循环显示预览图\n     */\n    loop: {\n      type: Boolean,\n      default: false,\n    },\n    /**\n     * 下载图片方法，不传使用内置的下载方法\n     */\n    downloadMethod: {\n      type: Function as PropType<(item: ItemType) => void | null>,\n      default: null,\n    }\n  },\n  emits: ['clickPhoto', 'clickMask', 'changeIndex', 'closeModal'],\n  setup(props) {\n    const { items, index, visible } = toRefs(props);\n    const currentItem = computed<ItemType>(() => {\n      return items.value[index.value] || {};\n    });\n\n    useBodyEffect(visible);\n    const {\n      photoVisible, showAnimateType, originRect, onShowAnimateEnd\n    } = useAnimationHandle(visible, currentItem);\n    const { innerWidth } = useInnerWidth();\n\n    return {\n      innerWidth,\n      currentItem,\n      photoVisible,\n      showAnimateType,\n      originRect,\n      onShowAnimateEnd,\n    };\n  },\n  data() {\n    return {\n      // 常量\n      horizontalOffset,\n      ShowAnimateEnum,\n      isTouchDevice,\n      // 触摸相关\n      touched: false,\n      hasMove: false,\n      needTransition: false,\n      clientX: 0,\n      clientY: 0,\n      touchMoveX: 0,\n      backdropOpacity: this.defaultBackdropOpacity,\n      // 是否显示覆盖物\n      overlayVisible: true,\n      // 虚拟下标，用于循环预览\n      virtualIndex: 0,\n      // photo-view 子组件\n      photoViewRefs: {} as { [key: string]: InstanceType<typeof PhotoView> },\n    };\n  },\n  computed: {\n    // 当前显示的图片列表\n    showItems() {\n      const len = this.items.length;\n      if (this.loop) {\n        const connect = this.items.concat(this.items).concat(this.items);\n        return connect.slice(len + this.index - 1, len + this.index + 2);\n      }\n      return this.items.slice(Math.max(this.index - 1, 0), Math.min(this.index + 2, len));\n    }\n  },\n  created() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  },\n  beforeUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  },\n  beforeUpdate() {\n    this.photoViewRefs = {};\n  },\n  methods: {\n    defaultDownloadMethod(item: ItemType) {\n      const paths = item.src.split('/');\n      const name = paths[paths.length - 1];\n\n      const img = new Image();\n      img.setAttribute('crossOrigin', 'Anonymous');\n      img.onload = () => {\n        const canvas = document.createElement('canvas');\n        const context = canvas.getContext('2d');\n        canvas.width = img.width;\n        canvas.height = img.height;\n        context?.drawImage(img, 0, 0, img.width, img.height);\n        canvas.toBlob(blob => {\n          if (blob) {\n            const url = URL.createObjectURL(blob);\n            const a = document.createElement('a');\n            a.download = item.downloadName || name;\n            a.href = url;\n            a.dispatchEvent(new MouseEvent('click'));\n            // 释放 createObjectURL 创建的内存对象（否则以 blob:http 开头的 url 可以到浏览器访问，多次创建内存会不断增大）\n            URL.revokeObjectURL(url);\n          }\n        });\n      };\n      img.src = item.src + '?v=' + Date.now();\n    },\n    handleDownload() {\n      const item = this.items[this.index];\n      if (typeof this.downloadMethod === 'function') {\n        this.downloadMethod(item);\n      } else {\n        this.defaultDownloadMethod(item);\n      }\n    },\n    toggleFlipHorizontal() {\n      this.photoViewRefs[this.currentItem.key]?.toggleFlipHorizontal();\n    },\n    toggleFlipVertical() {\n      this.photoViewRefs[this.currentItem.key]?.toggleFlipVertical();\n    },\n    handleRotateLeft() {\n      this.photoViewRefs[this.currentItem.key]?.handleRotateLeft();\n    },\n    handleRotateRight() {\n      this.photoViewRefs[this.currentItem.key]?.handleRotateRight();\n    },\n    setPhotoViewRef(key: string, ref: InstanceType<typeof PhotoView>) {\n      this.photoViewRefs[key] = ref;\n    },\n    handleKeyDown(e: KeyboardEvent) {\n      if (this.visible) {\n        switch (e.code) {\n          case 'ArrowLeft':\n            this.handlePrevious();\n            break;\n          case 'ArrowRight':\n            this.handleNext();\n            break;\n          case 'Escape':\n            this.handleClickClose();\n            break;\n        }\n      }\n    },\n    handleSingleTap(_clientX: number, _clientY: number, e: MouseEvent | TouchEvent) {\n      if (this.toggleOverlay) {\n        this.overlayVisible = !this.overlayVisible;\n      }\n      this.$emit('clickPhoto', e);\n    },\n    handleTouchStart(clientX: number, clientY: number) {\n      this.touched = true;\n      this.needTransition = false;\n      this.clientX = clientX;\n      this.clientY = clientY;\n    },\n    handleTouchMove(touchType: TouchTypeEnum, clientX: number, clientY: number, lastScale: number, edgeTypes: EdgeTypeEnum[]) {\n      if (touchType === TouchTypeEnum.Scale && lastScale !== 1) {\n        this.handleTouchScaleMove(clientX, edgeTypes);\n      }\n      if (touchType === TouchTypeEnum.X) {\n        this.handleTouchHorizontalMove(clientX);\n      }\n      if (touchType === TouchTypeEnum.Y) {\n        this.handleTouchVerticalMove(clientX, clientY);\n      }\n    },\n    handleTouchScaleMove(clientX: number, edgeTypes: EdgeTypeEnum[]) {\n      let touchMoveX = clientX - this.clientX;\n      if (\n        (touchMoveX > 0 && edgeTypes.includes(EdgeTypeEnum.Left)) ||\n        (touchMoveX < 0 && edgeTypes.includes(EdgeTypeEnum.Right))\n      ) {\n        this.handleTouchHorizontalMove(clientX);\n      }\n    },\n    handleTouchHorizontalMove(clientX: number) {\n      let touchMoveX = clientX - this.clientX;\n\n      // 非循环模式下，第一张和最后一张超出时拖拽距离减半\n      if (\n        !this.loop &&\n        ((this.index === 0 && touchMoveX > 0) || (this.index === this.items.length - 1 && touchMoveX < 0))\n      ) {\n        touchMoveX = touchMoveX / 2;\n      }\n\n      this.hasMove = clientX !== this.clientX;\n      this.touchMoveX = touchMoveX;\n    },\n    handleTouchVerticalMove(clientX: number, clientY: number) {\n      let touchMoveY = Math.abs(clientY - this.clientY);\n      const opacity = Math.max(\n        Math.min(this.defaultBackdropOpacity, this.defaultBackdropOpacity - touchMoveY / 100 / 4),\n        0\n      );\n\n      this.hasMove = clientX !== this.clientX || clientY !== this.clientY;\n      this.backdropOpacity = opacity;\n    },\n    handleTouchEnd(touchType: TouchTypeEnum, clientX: number, clientY: number, lastScale: number, edgeTypes: EdgeTypeEnum[]) {\n      if (touchType === TouchTypeEnum.Scale && lastScale !== 1) {\n        this.handleTouchScaleEnd(clientX, edgeTypes);\n      }\n      if (touchType === TouchTypeEnum.X) {\n        this.handleTouchHorizontalEnd(clientX);\n      }\n      if (touchType === TouchTypeEnum.Y) {\n        this.handleTouchVerticalEnd(clientY);\n      }\n      // 只要移动过，则需要动画过渡\n      if (this.hasMove) {\n        this.needTransition = true;\n      }\n      this.touched = false;\n      this.hasMove = false;\n      this.clientX = 0;\n      this.clientY = 0;\n      this.touchMoveX = 0;\n    },\n    handleTouchScaleEnd(clientX: number, edgeTypes: EdgeTypeEnum[]) {\n      const offsetX = clientX - this.clientX;\n      // 下一张\n      if (offsetX < -minSwitchImageOffset && edgeTypes.includes(EdgeTypeEnum.Right)) {\n        this.handleNext();\n      }\n      // 上一张\n      if (offsetX > minSwitchImageOffset && edgeTypes.includes(EdgeTypeEnum.Left)) {\n        this.handlePrevious();\n      }\n    },\n    handleTouchHorizontalEnd(clientX: number) {\n      const offsetX = clientX - this.clientX;\n      // 下一张\n      if (offsetX < -minSwitchImageOffset) {\n        this.handleNext();\n      }\n      // 上一张\n      if (offsetX > minSwitchImageOffset) {\n        this.handlePrevious();\n      }\n    },\n    handleTouchVerticalEnd(clientY: number) {\n      const offsetY = clientY - this.clientY;\n\n      if (Math.abs(offsetY) > window.innerHeight * 0.14) {\n        this.$emit('closeModal');\n      } else {\n        this.resetBackdropOpacity();\n      }\n    },\n    resetBackdropOpacity() {\n      this.backdropOpacity = this.defaultBackdropOpacity;\n    },\n    resetNeedTransition() {\n      this.needTransition = false;\n    },\n    handlePrevious() {\n      const len = this.items.length;\n      if (!this.loop && this.index === 0) return;\n      this.$emit('changeIndex', (this.index + len - 1) % len);\n      this.virtualIndex -= 1;\n    },\n    handleNext() {\n      const len = this.items.length;\n      if (!this.loop && this.index === len - 1) return;\n      this.$emit('changeIndex', (this.index + 1) % len);\n      this.virtualIndex += 1;\n    },\n    handleClickMask(e: MouseEvent | TouchEvent) {\n      this.$emit('clickMask', e);\n    },\n    handleClickClose() {\n      this.$emit('closeModal');\n    },\n    // 当预览下一张时，currentIndex 会从 1 变成 0，相当于左移一个单位，所以此时只需要右移一个单位的来平衡 transform 的左移即可\n    getItemLeft(currentIndex: number) {\n      let index = this.virtualIndex + currentIndex;\n      // 非循环模式的第一张图片不需要左移，因为只有两张图片，左侧没有图片\n      if (this.loop || this.index !== 0) {\n        index -= 1;\n      }\n      return `${(this.innerWidth + this.horizontalOffset) * index}px`;\n    },\n    getItemTransition() {\n      const transition = 'transform 0.6s cubic-bezier(0.25, 0.8, 0.25, 1)';\n      if (this.needTransition) {\n        return transition;\n      }\n      if (this.hasMove) {\n        return undefined;\n      }\n      return this.shouldTransition ? transition : undefined;\n    },\n    getItemTransform() {\n      return `translate3d(${-(this.innerWidth + this.horizontalOffset) * this.virtualIndex + this.touchMoveX}px, 0px, 0px)`;\n    }\n  }\n});\n</script>\n\n<style lang=\"scss\">\n@keyframes PhotoView__fade {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n\n.PhotoSlider__Wrapper.PhotoSlider__Clean {\n  .PhotoSlider__BannerWrap,\n  .PhotoSlider__ArrowLeft,\n  .PhotoSlider__ArrowRight,\n  .PhotoSlider__FooterWrap {\n    opacity: 0;\n    @media (any-hover: hover){\n      &:hover {\n        opacity: 0;\n      }\n    }\n  }\n}\n\n.PhotoSlider__Wrapper.PhotoSlider__Hide {\n  .PhotoSlider__BannerWrap,\n  .PhotoSlider__ArrowLeft,\n  .PhotoSlider__ArrowRight,\n  .PhotoSlider__FooterWrap {\n    opacity: 0;\n  }\n}\n\n.PhotoSlider__Wrapper {\n  position: fixed;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  z-index: 2000;\n  user-select: none;\n\n  .PhotoSlider__Backdrop {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    z-index: -1;\n\n    &.PhotoSlider__fadeIn {\n      opacity: 0;\n      animation: PhotoView__fade 0.4s linear both;\n    }\n    &.PhotoSlider__fadeOut {\n      opacity: 1;\n      animation: PhotoView__fade 0.4s linear both reverse;\n    }\n  }\n\n  .PhotoSlider__BannerWrap {\n    position: absolute;\n    left: 0;\n    top: 0;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    width: 100%;\n    height: 44px;\n    color: white;\n    background-color: rgba(0, 0, 0, 0.5);\n    transition: opacity 0.2s ease-out;\n    z-index: 20;\n\n    @media (any-hover: hover){\n      &:hover {\n        opacity: 1;\n      }\n    }\n\n    .PhotoSlider__Counter {\n      padding: 0 10px;\n      font-size: 14px;\n      opacity: 0.75;\n    }\n\n    .PhotoSlider__BannerRight {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      height: 100%;\n\n      .PhotoSlider__BannerIcon {\n        vertical-align: top;\n        box-sizing: border-box;\n        padding: 10px;\n        opacity: 0.75;\n        cursor: pointer;\n        transition: all 0.2s linear;\n\n        @media (any-hover: hover){\n          &:hover {\n            opacity: 1;\n          }\n        }\n      }\n    }\n  }\n\n  .PhotoSlider__PhotoBox {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    z-index: 10;\n    overflow: hidden;\n  }\n\n  .PhotoSlider__ArrowLeft {\n    left: 0;\n  }\n\n  .PhotoSlider__ArrowRight {\n    right: 0;\n  }\n\n  .PhotoSlider__ArrowLeft,\n  .PhotoSlider__ArrowRight {\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    margin: auto 0 auto 0;\n    width: 70px;\n    height: 100px;\n    opacity: 0.7;\n    z-index: 20;\n    cursor: pointer;\n    transition: opacity 0.2s linear;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    @media (any-hover: hover){\n      &:hover {\n        opacity: 1;\n      }\n    }\n\n    svg {\n      box-sizing: content-box;\n      padding: 10px;\n      width: 24px;\n      height: 24px;\n      fill: white;\n      background: rgba(0, 0, 0, 0.3);\n    }\n  }\n\n  .PhotoSlider__FooterWrap {\n    position: absolute;\n    left: 0;\n    bottom: 0;\n    box-sizing: border-box;\n    width: 100%;\n    min-height: 44px;\n    padding: 10px;\n    line-height: 1.5;\n    font-size: 14px;\n    text-align: justify;\n    color: #ccc;\n    background-color: rgba(0, 0, 0, 0.5);\n    transition: opacity 0.2s ease-out;\n    z-index: 20;\n\n    @media (any-hover: hover){\n      &:hover {\n        opacity: 1;\n      }\n    }\n  }\n}\n</style>\n","<template>\n  <!-- @slot 默认插槽 -->\n  <slot />\n  <photo-slider\n    :visible=\"visible\"\n    :index=\"index\"\n    :should-transition=\"shouldTransition\"\n    :toggle-overlay=\"!photoClosable\"\n    :default-backdrop-opacity=\"defaultBackdropOpacity\"\n    :items=\"items\"\n    :loop=\"loop\"\n    :download-method=\"downloadMethod\"\n    @clickPhoto=\"handleClickPhoto\"\n    @clickMask=\"handleClickMask\"\n    @changeIndex=\"updateIndex\"\n    @closeModal=\"handleHide\"\n  />\n</template>\n\n<script lang='ts'>\nimport { defineComponent, PropType, provide } from 'vue';\nimport { updateItemKey, removeItemKey, handleShowKey } from '../symbols';\nimport useItems from './useItems';\nimport useVisible from './useVisible';\nimport useIndex from './useIndex';\nimport PhotoSlider from '../PhotoSlider/index.vue';\nimport { ItemType } from '../types';\n\nexport default defineComponent({\n  name: 'PhotoProvider',\n  components: {\n    PhotoSlider\n  },\n  props: {\n    /**\n     * 图片点击是否关闭\n     */\n    photoClosable: {\n      type: Boolean,\n      default: false,\n    },\n    /**\n     * 背景点击是否关闭\n     */\n    maskClosable: {\n      type: Boolean,\n      default: true,\n    },\n    /**\n     * 箭头切换是否需要过渡\n     */\n    shouldTransition: {\n      type: Boolean,\n      default: false,\n    },\n    /**\n     * 默认背景透明度\n     */\n    defaultBackdropOpacity: {\n      type: Number,\n      default: 1,\n    },\n    /**\n     * 是否循环显示预览图\n     */\n    loop: {\n      type: Boolean,\n      default: false,\n    },\n    /**\n     * 下载图片方法，不传使用内置的下载方法\n     */\n    downloadMethod: {\n      type: Function as PropType<(item: ItemType) => void | null>,\n      default: null,\n    }\n  },\n  emits: ['indexChange', 'visibleChange'],\n  setup(_props, { emit }) {\n    const onIndexChange = () => {\n      emit('indexChange', { index, items, visible });\n    };\n    const onVisibleChange = () => {\n      emit('visibleChange', { index, items, visible });\n    };\n    const { index, updateIndex } = useIndex(onIndexChange);\n    const { items, updateItem, removeItem } = useItems(index);\n    const { visible, handleHide, handleShow } = useVisible(items, index, onVisibleChange);\n\n    provide(updateItemKey, updateItem);\n    provide(removeItemKey, removeItem);\n    provide(handleShowKey, handleShow);\n\n    return {\n      items,\n      updateItem,\n      removeItem,\n      visible,\n      handleHide,\n      handleShow,\n      index,\n      updateIndex,\n    };\n  },\n  methods: {\n    handleClickPhoto() {\n      if (this.photoClosable) {\n        this.handleHide();\n      }\n    },\n    handleClickMask() {\n      if (this.maskClosable) {\n        this.handleHide();\n      }\n    }\n  }\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n","<template>\n  <!-- @slot 默认插槽 -->\n  <slot />\n  <photo-slider\n    :visible=\"visible\"\n    :index=\"index\"\n    :should-transition=\"shouldTransition\"\n    :toggle-overlay=\"!photoClosable\"\n    :default-backdrop-opacity=\"defaultBackdropOpacity\"\n    :items=\"items\"\n    :loop=\"loop\"\n    :download-method=\"downloadMethod\"\n    @clickPhoto=\"handleClickPhoto\"\n    @clickMask=\"handleClickMask\"\n    @changeIndex=\"updateIndex\"\n    @closeModal=\"handleHide\"\n  />\n</template>\n\n<script lang='ts'>\nimport { defineComponent, PropType, provide } from 'vue';\nimport { updateItemKey, removeItemKey, handleShowKey } from '../symbols';\nimport useItems from './useItems';\nimport useVisible from './useVisible';\nimport useIndex from './useIndex';\nimport PhotoSlider from '../PhotoSlider/index.vue';\nimport { ItemType } from '../types';\n\nexport default defineComponent({\n  name: 'PhotoProvider',\n  components: {\n    PhotoSlider\n  },\n  props: {\n    /**\n     * 图片点击是否关闭\n     */\n    photoClosable: {\n      type: Boolean,\n      default: false,\n    },\n    /**\n     * 背景点击是否关闭\n     */\n    maskClosable: {\n      type: Boolean,\n      default: true,\n    },\n    /**\n     * 箭头切换是否需要过渡\n     */\n    shouldTransition: {\n      type: Boolean,\n      default: false,\n    },\n    /**\n     * 默认背景透明度\n     */\n    defaultBackdropOpacity: {\n      type: Number,\n      default: 1,\n    },\n    /**\n     * 是否循环显示预览图\n     */\n    loop: {\n      type: Boolean,\n      default: false,\n    },\n    /**\n     * 下载图片方法，不传使用内置的下载方法\n     */\n    downloadMethod: {\n      type: Function as PropType<(item: ItemType) => void | null>,\n      default: null,\n    }\n  },\n  emits: ['indexChange', 'visibleChange'],\n  setup(_props, { emit }) {\n    const onIndexChange = () => {\n      emit('indexChange', { index, items, visible });\n    };\n    const onVisibleChange = () => {\n      emit('visibleChange', { index, items, visible });\n    };\n    const { index, updateIndex } = useIndex(onIndexChange);\n    const { items, updateItem, removeItem } = useItems(index);\n    const { visible, handleHide, handleShow } = useVisible(items, index, onVisibleChange);\n\n    provide(updateItemKey, updateItem);\n    provide(removeItemKey, removeItem);\n    provide(handleShowKey, handleShow);\n\n    return {\n      items,\n      updateItem,\n      removeItem,\n      visible,\n      handleHide,\n      handleShow,\n      index,\n      updateIndex,\n    };\n  },\n  methods: {\n    handleClickPhoto() {\n      if (this.photoClosable) {\n        this.handleHide();\n      }\n    },\n    handleClickMask() {\n      if (this.maskClosable) {\n        this.handleHide();\n      }\n    }\n  }\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n","/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nexport default arrayMap;\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nexport default isArray;\n","import Symbol from './_Symbol.js';\nimport arrayMap from './_arrayMap.js';\nimport isArray from './isArray.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isArray(value)) {\n    // Recursively convert values (susceptible to call stack limits).\n    return arrayMap(value, baseToString) + '';\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nexport default baseToString;\n","import baseToString from './_baseToString.js';\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\nexport default toString;\n","import toString from './toString.js';\n\n/** Used to generate unique IDs. */\nvar idCounter = 0;\n\n/**\n * Generates a unique ID. If `prefix` is given, the ID is appended to it.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {string} [prefix=''] The value to prefix the ID with.\n * @returns {string} Returns the unique ID.\n * @example\n *\n * _.uniqueId('contact_');\n * // => 'contact_104'\n *\n * _.uniqueId();\n * // => '105'\n */\nfunction uniqueId(prefix) {\n  var id = ++idCounter;\n  return toString(prefix) + id;\n}\n\nexport default uniqueId;\n","<template>\n  <span\n    v-if=\"$slots.default()\"\n    ref=\"root\"\n    style=\"display:inline-block;\"\n    class=\"PhotoConsumer\"\n    @click=\"handleClick\"\n  >\n    <!-- @slot 默认插槽 -->\n    <slot />\n  </span>\n</template>\n\n<script lang='ts'>\nimport { defineComponent, inject, onMounted, onUnmounted, ref, watch, toRefs } from 'vue';\nimport { updateItemKey, removeItemKey, handleShowKey } from '../symbols';\nimport uniqueId from 'lodash-es/uniqueId';\n\nexport default defineComponent({\n  name: 'PhotoConsumer',\n  props: {\n    /**\n     * 图片地址\n     */\n    src: {\n      type: String,\n      required: true,\n    },\n    /**\n     * 图片介绍\n     */\n    intro: {\n      type: String,\n      default: null\n    },\n    /**\n     * 图片下载名称，默认图片名称\n     */\n    downloadName: {\n      type: String,\n      default: null\n    }\n  },\n  setup(props) {\n    const updateItem = inject(updateItemKey);\n    const removeItem = inject(removeItemKey);\n    const handleShow = inject(handleShowKey);\n    const root = ref<HTMLElement | null>(null);\n    const key = uniqueId();\n    const { src, intro, downloadName } = toRefs(props);\n\n    const handleClick = () => {\n      handleShow?.(key);\n    };\n    const getItem = () => ({\n      key,\n      src: src.value,\n      originRef: root.value,\n      intro: intro.value,\n      downloadName: downloadName.value\n    });\n\n    watch([src, intro, downloadName], () => {\n      updateItem?.(getItem());\n    });\n\n    onMounted(() => {\n      updateItem?.(getItem());\n    });\n    onUnmounted(() => {\n      removeItem?.(key);\n    });\n\n    return {\n      root,\n      handleClick\n    };\n  },\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n","<template>\n  <span\n    v-if=\"$slots.default()\"\n    ref=\"root\"\n    style=\"display:inline-block;\"\n    class=\"PhotoConsumer\"\n    @click=\"handleClick\"\n  >\n    <!-- @slot 默认插槽 -->\n    <slot />\n  </span>\n</template>\n\n<script lang='ts'>\nimport { defineComponent, inject, onMounted, onUnmounted, ref, watch, toRefs } from 'vue';\nimport { updateItemKey, removeItemKey, handleShowKey } from '../symbols';\nimport uniqueId from 'lodash-es/uniqueId';\n\nexport default defineComponent({\n  name: 'PhotoConsumer',\n  props: {\n    /**\n     * 图片地址\n     */\n    src: {\n      type: String,\n      required: true,\n    },\n    /**\n     * 图片介绍\n     */\n    intro: {\n      type: String,\n      default: null\n    },\n    /**\n     * 图片下载名称，默认图片名称\n     */\n    downloadName: {\n      type: String,\n      default: null\n    }\n  },\n  setup(props) {\n    const updateItem = inject(updateItemKey);\n    const removeItem = inject(removeItemKey);\n    const handleShow = inject(handleShowKey);\n    const root = ref<HTMLElement | null>(null);\n    const key = uniqueId();\n    const { src, intro, downloadName } = toRefs(props);\n\n    const handleClick = () => {\n      handleShow?.(key);\n    };\n    const getItem = () => ({\n      key,\n      src: src.value,\n      originRef: root.value,\n      intro: intro.value,\n      downloadName: downloadName.value\n    });\n\n    watch([src, intro, downloadName], () => {\n      updateItem?.(getItem());\n    });\n\n    onMounted(() => {\n      updateItem?.(getItem());\n    });\n    onUnmounted(() => {\n      removeItem?.(key);\n    });\n\n    return {\n      root,\n      handleClick\n    };\n  },\n});\n</script>\n\n<style lang=\"scss\">\n</style>\n","import { App } from 'vue';\nimport PhotoProvider from './PhotoProvider/index.vue';\nimport PhotoConsumer from './PhotoConsumer/index.vue';\nimport PhotoSlider from './PhotoSlider/index.vue';\n\nconst components = [\n  PhotoProvider,\n  PhotoConsumer,\n  PhotoSlider\n];\n\nconst install = (app: App): void  => {\n  components.forEach(component => {\n    app.component(component.name, component);\n  });\n};\n\nexport * from './types';\n\nexport { PhotoProvider, PhotoConsumer, PhotoSlider };\n\nexport default { install };\n"],"names":["ref","defineComponent","_hoisted_1","_createElementVNode","_hoisted_2","_openBlock","_createElementBlock","_hoisted_3","watch","freeGlobal","root","Symbol","objectProto","nativeObjectToString","symToStringTag","FUNC_ERROR_TEXT","now","onBeforeUnmount","ShowAnimateEnum","TouchTypeEnum","EdgeTypeEnum","Spinner","toRefs","_normalizeStyle","_createBlock","_hoisted_4","PhotoView","Close","ArrowLeft","ArrowRight","RotateLeft","RotateRight","FlipHorizontal","FlipVertical","Download","computed","_Teleport","_toDisplayString","_createVNode","_Fragment","_renderList","PhotoSlider","provide","_createCommentVNode","_renderSlot","isArray","inject","onMounted","onUnmounted","PhotoProvider","PhotoConsumer"],"mappings":"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"}